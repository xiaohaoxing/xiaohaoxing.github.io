[{"title":"éƒ¨ç½² FRP åå‘ä»£ç†æµç¨‹","path":"2023/04/14/éƒ¨ç½²-FRP-åå‘ä»£ç†æµç¨‹/","text":"æœ€è¿‘æœ‰å¥½å‡ ä¸ªæœºå™¨éƒ½è¦ç”¨åå‘ä»£ç†èƒ½åŠ›å°†å†…ç½‘çš„æœºå™¨æ˜ å°„å‡ºæ¥ï¼Œåšå¤šäº†å°±æˆäº†æœºæ¢°æ“ä½œï¼Œè¿™é‡ŒæŠŠå…·ä½“æ“ä½œæµç¨‹å†™ä¸‹æ¥ï¼Œæ–¹ä¾¿è‡ªå·±ä¹Ÿæ–¹ä¾¿å¤§å®¶å‚è€ƒã€‚ å‰ç½®æ¡ä»¶ æœ‰å…¬ç½‘ IP çš„æœºå™¨ä¸€å° éœ€è¦æ˜ å°„çš„æœºå™¨ N å° æœåŠ¡ç«¯æµç¨‹ é¦–å…ˆåœ¨æœ‰å…¬ç½‘ IP çš„æœºå™¨ä¸Šéƒ¨ç½²æœåŠ¡ç«¯ï¼ˆserverï¼‰ï¼Œä¾›å…¶ä»–çš„æœºå™¨è¿æ¥ã€‚ ä¸‹è½½ FRP çš„æœ€æ–°ç‰ˆæœ¬ wget https://github.com/fatedier/frp/releases/download/v0.48.0/frp_0.48.0_linux_amd64.tar.gz è§£å‹å¹¶æ”¾åˆ°ä»»æ„ä½ æ–¹ä¾¿è®°å¿†çš„ç›®å½• # è§£å‹ tar -zxvf frp_0.48.0_linux_amd64.tar.gz # è¿›å…¥æ–‡ä»¶å¤¹ cd frp_0.48.0_linux_amd64 # åˆ›å»ºæ–‡ä»¶å¤¹ sudo mkdir /usr/lib/frp # ç§»åŠ¨æœåŠ¡ç«¯ç¨‹åº sudo cp frps /usr/lib/frp/ # ç§»åŠ¨æœåŠ¡ç«¯é…ç½® sudo cp frps.ini /usr/lib/frp/ å‰å¾€é…ç½®æœåŠ¡ç«¯ sudo vim /usr/lib/frp/frps.ini [common] # å…¶ä»–çš„ä¹Ÿè¡Œï¼Œä¸ä¸‹é¢å®¢æˆ·ç«¯é…ç½®ä¿æŒä¸€è‡´å³å¯ bind_port = 7001 token = [YOUR_TOKEN] dashboard_port = 8080 databoard_user = [YOUR_USERNAME] dashboard_pwd = [YOUR_PASSWORD] enable_prometheus = true log_file = /usr/lib/frp/frps.log log_level = info log_max_days = 7 ç¼–å†™æœåŠ¡ç«¯ç¨‹åºçš„ç³»ç»ŸæœåŠ¡ # è¿™é‡Œæ˜¯/usr/lib/...ï¼Œç”¨æˆ·çº§åˆ«çš„ç³»ç»ŸæœåŠ¡ sudo vim /usr/lib/systemd/system/frps.service [Unit] Description=Frp Server Service After=network.target [Service] Type=simple User=nobody Restart=on-failure RestartSec=5s ExecStart=/usr/lib/frp/frps -c /usr/lib/frp/frps.ini [Install] WantedBy=multi-user.target ä½¿ç”¨ç³»ç»ŸæœåŠ¡çš„æ–¹å¼å¯åŠ¨æœåŠ¡ç«¯ç¨‹åº &amp; å¯ç”¨å¼€æœºè‡ªåŠ¨å¯åŠ¨ systemctl start frps systemctl enable frps åœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ [IP]:8080 è¿›å…¥æ§åˆ¶å°ï¼ˆè´¦å·å¯†ç åœ¨ç¬¬ä¸‰æ­¥è®¾ç½®äº†ï¼‰ï¼ŒæŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨äº†ã€‚å¦‚æœå‡ºç°ç•Œé¢åˆ™è¡¨ç¤ºæœåŠ¡ç«¯å·²ç»æ­£å¸¸å¯åŠ¨äº†~ğŸ‰ å®¢æˆ·ç«¯æµç¨‹ å®¢æˆ·ç«¯æµç¨‹åŸºæœ¬åŒä¸Šï¼Œä¸åŒçš„åœ°æ–¹ä¼šæ ‡è¯†å‡ºæ¥ã€‚åœ¨å†…ç½‘ç¯å¢ƒçš„è®¾å¤‡ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š ä¸‹è½½ FRP çš„æœ€æ–°ç‰ˆæœ¬ wget https://github.com/fatedier/frp/releases/download/v0.48.0/frp_0.48.0_linux_amd64.tar.gz è§£å‹å¹¶æ”¾åˆ°ä»»æ„ä½ æ–¹ä¾¿è®°å¿†çš„ç›®å½• âš ï¸ ç§»åŠ¨å®¢æˆ·ç«¯ç¨‹åºå’Œé…ç½®ï¼ # è§£å‹ tar -zxvf frp_0.48.0_linux_amd64.tar.gz # è¿›å…¥æ–‡ä»¶å¤¹ cd frp_0.48.0_linux_amd64 # åˆ›å»ºæ–‡ä»¶å¤¹ sudo mkdir /usr/lib/frp # ç§»åŠ¨å®¢æˆ·ç«¯ç¨‹åº sudo cp frpc /usr/lib/frp/ # ç§»åŠ¨å®¢æˆ·ç«¯é…ç½® sudo cp frpc.ini /usr/lib/frp/ å‰å¾€é…ç½®å®¢æˆ·ç«¯ âš ï¸ é…ç½®å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰æ‰€ä¸åŒï¼ sudo vim /usr/lib/frp/frpc.ini [common] server_addr = [YOUR_PUBLIC_IP_ADDRESS] server_port = 7001 # åœ¨ä¸Šé¢æœåŠ¡ç«¯é…ç½®çš„ token token = [YOUR_SERVER_CONFIG_TOKEN] # è¿™æ˜¯ä½ åœ¨æœåŠ¡ç«¯ç®¡ç†ç•Œé¢ä¸Šçœ‹åˆ°çš„åç§°ï¼Œå¯ä»¥ä»»æ„èµ·åã€‚ [cs-lab] type = tcp local_ip = 127.0.0.1 local_port = 22 # æ˜ å°„åˆ°å…¬ç½‘çš„ç«¯å£ remote_port = 20022 ç¼–å†™å®¢æˆ·ç«¯ç«¯ç¨‹åºçš„ç³»ç»ŸæœåŠ¡ sudo vim /usr/lib/systemd/system/frpc.service [Unit] Description=Frp Client Service After=network.target [Service] Type=simple User=nobody Restart=on-failure RestartSec=5s ExecStart=/usr/lib/frp/frpc -c /usr/lib/frp/frpc.ini [Install] WantedBy=multi-user.target ä½¿ç”¨ç³»ç»ŸæœåŠ¡çš„æ–¹å¼å¯åŠ¨æœåŠ¡ç«¯ç¨‹åº &amp; å¯ç”¨å¼€æœºè‡ªå¯ systemctl start frpc systemctl enable frpc åœ¨æ§åˆ¶å°åˆ·æ–°ä¸€ä¸‹æŸ¥çœ‹ proxyï¼Œå¦‚æœå‡ºç°æ–°æ¡ç›®åˆ™è¡¨ç¤ºå¯åŠ¨æˆåŠŸäº†ï¼ğŸ‰ Q&amp;A å¦‚æœå¯åŠ¨å‡ºç°é—®é¢˜ä¹Ÿä¸ç”¨ç´§å¼ ï¼Œç³»ç»ŸæœåŠ¡è™½ç„¶å½“åœºä¸ä¼šæ˜¾ç¤ºé”™è¯¯æ—¥å¿—ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡ journalctl -u frp å‘½ä»¤æŸ¥çœ‹å¯¹åº”çš„æ—¥å¿—ä»è€Œæ’æŸ¥é”™è¯¯ã€‚"},{"title":"è§£å†³å›½å†… OpenStreetMap åœ°å›¾æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜","path":"2023/04/11/è§£å†³å›½å†…-OpenStreetMap-åœ°å›¾æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜/","text":"ä»Šå¤©å»å¼€ä¼šï¼Œäº†è§£åˆ°å¸ˆå¼Ÿé‚£è¾¹é¡¹ç›®é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šOpenStreetMap çš„åœ°å›¾ç»„ä»¶åœ¨å›½å†…ç½‘ç»œç¯å¢ƒåˆ™åŠ è½½ä¸å‡ºæ¥ã€‚æœ¬ç€åŠ©äººä¸ºä¹çš„ç²¾ç¥ï¼Œæˆ‘ä¸»åŠ¨æ‰¿æ‹…äº†å¸®åŠ©è§£å†³è¿™ä¸ªé—®é¢˜çš„ä»»åŠ¡ã€‚ Â¶â“é—®é¢˜å¤ç° ç½‘ç«™åœ°å€ï¼š http://sheng.whu.edu.cn/spadas/, åœ¨æ‰“å¼€è¯¥åœ°å€åï¼Œå¯ä»¥çœ‹åˆ°åœ°å›¾ä¸Šçš„æ ‡æ³¨å¯ä»¥åŠ è½½ï¼Œä½†æ˜¯åº•å›¾æ²¡æœ‰å‡ºæ¥ã€‚åƒè¿™æ ·å­ï¼š åœ¨æ‰“å¼€ F12 ç½‘ç»œæƒ…å†µåå‘ç°ï¼Œå’Œå…¶ä»–çš„åœ°å›¾åŠ è½½æ–¹å¼ä¸€æ ·ï¼ŒOpenStreetMap ä¹Ÿæ˜¯ä½¿ç”¨äº†åœ°å›¾åˆ†å—å›¾å±‚çš„æ–¹å¼åŠ è½½çš„ï¼Œæ¯ä¸ªåŒºå—éƒ½æ˜¯å•ç‹¬åœ¨åŸŸåä¸‹ a.tile.openstreetmap.org å»è·å–çš„ã€‚è€Œè¿™ä¸ªåŸŸåé€šè¿‡ ping å‘ç°åœ¨å›½å†…ç½‘ç»œæ˜¯æ— æ³•è®¿é—®çš„ï¼š æœ€ç»ˆå°±ä¼šå¯¼è‡´æ‰€æœ‰å›¾å±‚çš„å›¾åƒè·å–å¤±è´¥ï¼Œåœ°å›¾æ˜¾ç¤ºç©ºç™½ï¼š Â¶ğŸ‘Œ è§£å†³æ–¹æ¡ˆ ç¡®è®¤äº†é—®é¢˜ï¼Œä¸‹é¢å°±æ˜¯å»æ‰¾å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸ºå·²ç»å®šä½åˆ°æ˜¯åŸŸåçš„é—®é¢˜ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ç›´å¥”ä¸»é¢˜ï¼Œå»æ‰¾ OpenStreetMap çš„ CDN åŠ é€Ÿæ–¹æ¡ˆã€‚ç»è¿‡ä¸€ç•ªæœå¯»ï¼Œæœ€ç»ˆå‘ç° OpenStreetMap å®˜ç½‘ åˆ—ä¸¾å‡ºäº†æ‰€æœ‰å›¾å±‚æ•°æ®çš„æœåŠ¡æä¾›å•†ï¼ˆå…è´¹/å•†ç”¨ï¼‰åŸŸååœ°å€ï¼Œurl ç»“æ„å¤§éƒ¨åˆ†ä¸º https://&#123;s&#125;.tile.[DOMAIN]/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.pngï¼Œè¿™å’Œä¸Šé¢çš„è®¿é—®å¤±è´¥çš„ç»“æ„å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥æ–­å®šå°±æ˜¯ä¿®æ”¹è¿™ä¸ª URL å³å¯æ›¿æ¢æ‰å›¾åƒçš„è·å–åœ°å€ï¼Œç¡®ä¿åœ°å›¾çš„æ­£ç¡®åŠ è½½ã€‚ æ¥ä¸‹æ¥åœ¨é¡¹ç›®å‰ç«¯ä»£ç é‡Œæœç´¢ openstreetmap.orgè¯¥åŸŸåï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°äº†å¯¹åº”çš„é…ç½®é¡¹ï¼š æœ€åæŠŠè¿™ä¸ª url æ¨¡æ¿åœ¨ç½‘ç«™ä¸Šæ‰¾ä¸€ä¸ªè®¿é—®é€Ÿåº¦å¿«çš„åœ°å€æ›¿æ¢æ‰ï¼Œåœ°å›¾ä¸åŠ è½½çš„é—®é¢˜å°±è§£å†³äº†ğŸ‰"},{"title":"å¯¼å‡ºå¾®ä¿¡èŠå¤©è®°å½•","path":"2022/11/15/å¯¼å‡ºå¾®ä¿¡èŠå¤©è®°å½•/","text":"Â¶èƒŒæ™¯ å¥³æœ‹å‹è®ºæ–‡éœ€è¦å¼•ç”¨å¾®ä¿¡ç¾¤çš„èŠå¤©è®°å½•ä½œä¸ºæ•°æ®åˆ†æï¼Œå› æ­¤æœ‰å¯¼å‡ºæŒ‡å®šç¾¤èŠçš„æ¶ˆæ¯è®°å½•çš„éœ€æ±‚ã€‚ç›¸ä¿¡æœ‰å¾ˆå¤šé‡åº¦ä¾èµ–å¾®ä¿¡çš„æœ‹å‹ä¹Ÿæœ‰å¯¼å‡ºå¾®ä¿¡èŠå¤©è®°å½•çš„éœ€æ±‚ï¼Œå› æ­¤è¿™é‡Œè¿‡ç¨‹ç‰¹åšä¸€ä¸ªè®°å½•ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©~ Â¶ç›¸å…³å·¥å…· ä¸»è¦ä½¿ç”¨çš„å·¥å…·ä¸º wxbackupï¼Œå¾®ä¿¡èŠå¤©è®°å½•å¯¼å‡ºç¥å™¨ã€‚ Â¶æ­¥éª¤ è¿æ¥æ‰‹æœºï¼ˆä»…é™ iOSï¼‰åˆ°ç”µè„‘ï¼Œå»ºè®®ä½¿ç”¨ Macï¼Œè™½ç„¶ä¸Šè¿°å·¥å…·æœ‰ windows å®¢æˆ·ç«¯ï¼Œä½†æ˜¯åœ¨åç»­å¯¼å‡ºè¿‡ç¨‹ä¸­å‡ºç°æŠ¥é”™å¯¼è‡´æ— æ³•è¿›è¡Œä¸‹å»ï¼Œè¿˜æ˜¯ MacOS ä¸Šæ¯”è¾ƒç¨³å®šã€‚ æ‰“å¼€ iTunesï¼ˆè€ç‰ˆæœ¬æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Appï¼Œæ–°ç‰ˆæœ¬ MacOS å·²ç»æ•´åˆè¿› Finder äº†ï¼Œç›´æ¥åœ¨ Finder ä¾§è¾¹æ æ‰¾åˆ°å¯¹åº”çš„è®¾å¤‡å³å¯ï¼‰ã€‚ åœ¨ iTunes ä¸­æ“ä½œå¤‡ä»½åˆ°æœ¬æœºï¼Œå¦‚å›¾ å¦‚æœå’Œæˆ‘æƒ…å†µä¸€æ ·ï¼Œ Mac ç©ºé—´æœ‰é™ï¼Œæ— æ³•å¤‡ä»½åˆ°æœ¬æœºï¼Œä¹Ÿæ˜¯æœ‰è§£å†³åŠæ³•çš„ï¼Œè¯¦è§ä¸‹é¢è¡¥å……éƒ¨åˆ†è¯´æ˜ã€‚ å¯¼å‡ºå®Œæˆåï¼Œæ‰“å¼€ä¸Šé¢ä¸‹è½½çš„å¾®ä¿¡å¯¼å‡ºå·¥å…· wxbackupï¼Œå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹å¤‡ä»½ä½ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¤‡ä»½ä¼šæç¤ºä½ æ‰‹åŠ¨æŒ‡å®šç›®å½•ï¼Œè¿™ç§æƒ…å†µå¯ä»¥æŒ‡å®š ~/Library/Application Support/MobileSync/Backup ç›®å½•è¯•è¯•ã€‚ è²Œä¼¼æ˜¯ MacOS ç‰ˆæœ¬æ›´æ–°å¯¼è‡´çš„ï¼Œæ—§ç‰ˆæœ¬çš„ç›®å½•æ˜¯åœ¨ ~/Library/Application Support/Apple/MobileSync/Backup ä¸‹ã€‚ å¦‚æœæˆåŠŸæ£€æµ‹åˆ°å¤‡ä»½ï¼Œå·¥å…·ä¼šè‡ªåŠ¨æå–å‡ºæ‰€æœ‰çš„èŠå¤©è®°å½•å±•ç¤ºä¸ºåˆ—è¡¨ï¼Œè¿™é‡Œå°±å¯ä»¥é€‰æ‹©è‡ªå·±æƒ³è¦å¯¼å‡ºçš„ç¾¤æˆ–è€…å•èŠé€‰æ‹©è¾“å‡ºä½ç½®ç›´æ¥å¯¼å‡ºäº†ã€‚ å¯¼å‡ºçš„æ ¼å¼ä¸ºé™æ€ç½‘é¡µï¼Œæ‰“å¼€æ–‡ä»¶å¤¹åæ‰“å¼€ index.html æ–‡ä»¶å³å¯é¢„è§ˆèŠå¤©ç•Œé¢ï¼Œè·ŸçœŸå®çš„å¾®ä¿¡èŠå¤©ç•Œé¢éå¸¸ç›¸ä¼¼ï¼ˆæ‚¼å¿µä¸‹ web ç‰ˆå¾®ä¿¡ï¼‰ã€‚ å¦‚æœæœ‰åç»­æ•°æ®å¤„ç†å’Œæ•°æ®åˆ†æéœ€æ±‚çš„ï¼Œæ‰€æœ‰çš„æ¶ˆæ¯æ•°æ®æ˜¯ä»¥ä¸€ä¸ª js å¤§å¯¹è±¡æ ¼å¼å­˜å‚¨åœ¨ js/message.js é‡Œçš„ï¼Œå¯ä»¥ç¼–å†™ä¸€ç‚¹ç®€å•çš„ JavaScript ä»£ç æ¥å¤„ç†ä¸€ä¸‹ï¼Œæ¯”å¦‚è½¬æ¢æˆ csv æˆ–è€… excel è¿™æ ·å­ã€‚è¿™é‡Œä¸å¤šåšä»‹ç»äº†ã€‚ Â¶å¦‚æœ Mac ç©ºé—´ä¸è¶³æ— æ³•å¤‡ä»½æ€ä¹ˆåŠï¼Ÿ è¿™é‡Œä¹Ÿæ˜¯æœ‰åŠæ³•çš„~åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å¦ä¸€æ¬¾ç¥å™¨ iMazingï¼Œæ”¯æŒå°†æ‰‹æœºç›´æ¥å¤‡ä»½åˆ°å¤–éƒ¨ç©ºé—´ä¸Šï¼Œä¸‹è½½å¹¶æ‰“å¼€ iMazingï¼Œç‚¹å‡»å¤‡ä»½ï¼Œå³å¯è‡ªè¡Œé€‰æ‹©å¤‡ä»½ä½ç½®ï¼Œæ¢åˆ° U ç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜å³å¯ã€‚"},{"title":"çˆ¬å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ","path":"2022/07/05/çˆ¬å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« /","text":"Â¶éœ€æ±‚èƒŒæ™¯ ç”±äºå¾®ä¿¡å…¬ä¼—å·æ–‡ç« çš„æœç´¢åŠŸèƒ½å®åœ¨æ˜¯è¿‡äºå­±å¼±ï¼ˆåªæ”¯æŒå†…å®¹åˆ†è¯åŒ¹é…+æ˜¯å¦æœ€è¿‘è¯»è¿‡+æ’åºæ–¹å¼ï¼‰ï¼Œå¯¹äºæŸäº›å…¬ä¼—å·å†…çš„æ–‡ç« éœ€è¦è¿›è¡Œæ›´å¤šçš„æ£€ç´¢å°±åªèƒ½è‡ªå·±åŠ¨æ‰‹äº†ã€‚ Â¶è®¾è®¡æ€è·¯ æ€»çš„è®¡åˆ’æ˜¯å°†æ–‡ç« çš„å†…å®¹éƒ½çˆ¬å–ä¸‹æ¥ä¿å­˜åœ¨è‡ªå·±çš„æ•°æ®åº“ä¸­ï¼Œåç»­éœ€è¦æŒ‰ç…§ä»»ä½•æ¡ä»¶æ£€ç´¢éƒ½å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œã€‚ å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« åˆ—è¡¨åœ¨ç”µè„‘ç«¯éƒ½æ˜¯è¦åœ¨å¾®ä¿¡å†…ç½®æµè§ˆå™¨å†…æ˜¾ç¤ºçš„ï¼Œåœ¨å¤–éƒ¨æµè§ˆå™¨å¼ºè¡Œæ‰“å¼€å°±ä¼šæç¤ºï¼šè¯·åœ¨å¾®ä¿¡ç«¯æ‰“å¼€ã€‚ä½†æ˜¯å…·ä½“ä¸€ç¯‡æ–‡ç« å´æ˜¯å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„ã€‚å› æ­¤ï¼Œè·å–åˆ°æ–‡ç« é“¾æ¥å†çˆ¬å–æ–‡ç« å†…å®¹ç›¸å¯¹æ˜¯æ¯”è¾ƒå®¹æ˜“åšåˆ°çš„ã€‚éš¾ç‚¹åœ¨äºå¦‚ä½•è·å–åˆ°å®Œæ•´çš„å…¬ä¼—å·æ–‡ç« åˆ—è¡¨ã€‚ graph LR æŠ“å–æ–‡ç« åˆ—è¡¨è¯·æ±‚--->çˆ¬å–æ–‡ç« åˆ—è¡¨--->çˆ¬å–æ–‡ç« æ­£æ–‡--->æ¢³ç†æ–‡ç« æ•°æ®--->è¾“å‡ºå±•ç¤º; Â¶æŠ“å–æ–‡ç« åˆ—è¡¨è¯·æ±‚ ç”±äºå¾®ä¿¡å…¬ä¼—å·ä¸»é¡µä¸èƒ½åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå› æ­¤è€ƒè™‘ä½¿ç”¨æŠ“åŒ…å·¥å…·æŠ“åˆ°è¯·æ±‚æ–‡ç« åˆ—è¡¨çš„è¯·æ±‚ã€‚ &nbsp;&nbsp;Mac ä¸Šå¤§å®¶æ¨èçš„å¤§å¤šæ˜¯ [Charles](https://xclient.info/s/charles.html)è¿™æ¬¾è½¯ä»¶ã€‚ä¸è¿‡è¿™æ¬¾è½¯ä»¶åœ¨æˆ‘çš„ mac ä¸Šå¥½åƒæœ‰ç‚¹æ°´åœŸä¸æœï¼Œåæ­£å°±æ˜¯æ— æ³•æŠ“åˆ°ä»»ä½•è¯·æ±‚ã€‚ ç„¶åå°±æ£€ç´¢åˆ°äº† windows ä¸Šå¸¸ç”¨çš„æŠ“åŒ…è½¯ä»¶ Fiddler å‡ºäº†ä¸€ä¸ª Fiddler Everywhereï¼Œå¯ä»¥åœ¨ MacOS ä¸Šå®‰è£…ä½¿ç”¨ã€‚äºæ˜¯ä½¿ç”¨äº†ä¸€ä¸‹ï¼Œæ•ˆæœæ‹”ç¾¤ï¼è€Œä¸”è½¯ä»¶è¿˜æ”¯æŒ http è¯·æ±‚è°ƒè¯•ï¼ˆPostman å±ï¼‰ï¼Œç•Œé¢ä¹Ÿæ˜¯éå¸¸ç°ä»£åŒ–å¾ˆå¥½çœ‹ï¼Œæ¨èï¼ Fiddler æŠ“åˆ°çš„å…¬ä¼—å·æ–‡ç« åˆ—è¡¨è¯·æ±‚ï¼š Â¶çˆ¬å–æ–‡ç« åˆ—è¡¨ è¿™ä¸€æ­¥å…·ä½“æ“ä½œå°±æ˜¯ç”¨ä»£ç ä¿®æ”¹ä¸€äº›å‚æ•°å¹¶é‡æ¼”ä¸Šè¿°çš„è¯·æ±‚ï¼Œå°†ç›¸åº”çš„ç»“æœæ‹¼æ¥ä¿å­˜ï¼Œä»è€Œè·å–æ•´ä¸ªå…¬ä¼—å·çš„æ‰€æœ‰æ–‡ç« é“¾æ¥~ å°†æŠ“å–çš„è¯·æ±‚çš„ urlã€methodã€headersã€params éƒ½ç²˜è´´å‡ºæ¥ï¼Œæ”¾åˆ° postman é‡Œä¿®æ”¹ä¸€ä¸‹ offset å‚æ•°å†æ¬¡è¯·æ±‚ç¡®è®¤æ˜¯å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ï¼š å±•å¼€å³è¾¹çš„ä»£ç ï¼Œé€‰æ‹©ä½ æƒ³ç”¨çš„çˆ¬è™«ä»£ç è¯­è¨€ç‰ˆæœ¬ï¼Œæˆ‘è¿™é‡Œç”¨äº† pythonï¼Œç¼–å†™å®Œæˆåçš„çˆ¬å–åˆ—è¡¨çš„ä»£ç å¦‚ä¸‹ï¼š import requests import json def send_req(offset): url = \"https://mp.weixin.qq.com/mp/profile_ext?action=getmsg&amp;__biz=Mzg5OTE4NTczMQ==&amp;f=json&amp;offset=\" + str( offset) + \"&amp;count=10&amp;is_ok=1&amp;...ç•¥\" payload = &#123;&#125; headers = &#123; # ç•¥ &#125; response = requests.request(\"GET\", url, headers=headers, data=payload) resp = json.loads(response.text) return resp['general_msg_list'], resp['next_offset'], resp['can_msg_continue'] == 1 if __name__ == '__main__': has_more = True offset = 0 count = 1 all_list = [] while has_more: msg_list, offset, has_more = send_req(offset) print('ç¬¬' + str(count) + 'é¡µ:' + msg_list) post_list = json.loads(msg_list) all_list.extend(post_list) count += 1 print(json.dumps(all_list)) è¿™é‡Œæœ‰ä¸€ä¸ªå°ä¼˜åŒ–ç‚¹ï¼šæ¯æ¬¡è¯·æ±‚æ‹¿åˆ°çš„ç»“æœæ˜¯{â€œlistâ€: [â€¦]}ï¼Œå¯ä»¥å…ˆå±•å¼€å† appendã€‚è¿™é‡Œæ‡’å¾—å¼„äº†å°±è¿™æ ·å§~åç»­è§£æçš„æ—¶å€™æŒ‰è¡Œè§£æå°±è¡Œäº†ã€‚ Â¶çˆ¬å–æ–‡ç« æ­£æ–‡ è·å–åˆ°åˆ—è¡¨åè§‚å¯Ÿä¸€ä¸‹ç»“æ„ï¼š å­—æ®µå¾ˆå¤šï¼ŒæŒ‰ç…§è‡ªå·±éœ€æ±‚å†³å®šå°†å…¶ä¸­çš„ typeï¼ˆåšåˆ†ç»„æ£€ç´¢å¯èƒ½ç”¨å¾—ä¸Šï¼Œè™½ç„¶è¿˜æ²¡ææ‡‚æšä¸¾å€¼åˆ†åˆ«æ˜¯ä»€ä¹ˆå«ä¹‰ï¼‰ï¼Œdatetmeï¼ˆæ—¶é—´èŒƒå›´æ¡ä»¶ç­›é€‰ï¼‰ï¼Œtitleï¼Œcontent_urlï¼Œcoverï¼ˆå°é¢å›¾ï¼Œåç»­å±•ç¤ºæ•ˆæœä¼˜åŒ–æ—¶å¯èƒ½ç”¨å¾—ä¸Šï¼‰è¿™å‡ ä¸ªå­—æ®µæŒ‘é€‰å‡ºæ¥ä½¿ç”¨ã€‚ è¿™é‡Œåˆæœ‰ä¸€ä¸ªä¼˜åŒ–ç‚¹ï¼Œåœ¨æœ€ç»ˆå±•ç¤ºçš„æ—¶å€™å‘ç°ï¼Œæœ‰å¾ˆå¤šè²Œä¼¼è‰ç¨¿/å·²åˆ é™¤çš„ä¹Ÿè¢«æŸ¥è¯¢å‡ºæ¥äº†ï¼Œè¿™é‡Œåº”è¯¥è¦æŒ‰ç…§ status åšä¸€æ¬¡è¿‡æ»¤ã€‚ å°†ä¸Šè¿°å‡ ä¸ªå­—æ®µä¿å­˜åˆ°ç»“æ„ä½“ä¸­ï¼Œå¹¶ç•™ç©º content å­—æ®µï¼Œç­‰å¾…åç»­çˆ¬æ­£æ–‡å†…å®¹å†å¡«å……ã€‚ Â¶è½¬æ¢è§£æç»“æ„ä½“ # Python ä¸­é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ class Record: def __init__(self, obj): common = obj['comm_msg_info'] ext = obj['app_msg_ext_info'] self.type = common['type'] self.datetime = common['datetime'] self.title = ext['title'] self.content_url = ext['content_url'] self.cover_url = ext['cover'] self.content = '' with open('wechat.json') as f: has_more = True while has_more: line = f.readline() if line == '' or line == '\\n': has_more = False continue objs = json.loads(line) arr = objs['list'] for obj in arr: results.append(Record(obj)) Â¶è¯·æ±‚æ–‡ç« æ­£æ–‡ è¯»å–äº†æ–‡ç« åˆ—è¡¨åå°±å¯ä»¥å¼€å§‹çˆ¬å–æ–‡ç« æ•°æ®äº†ã€‚è¿™é‡Œç”¨ requests æ¨¡å—å‘é€ http è¯·æ±‚è·å–æ­£æ–‡ï¼ŒBeautifulSoup æ¨¡å—è§£æå“åº”çš„ html æ–‡æ¡£ã€‚åœ¨ F12 æ§åˆ¶å°ä¸­å¯ä»¥æ£€ç´¢åˆ°æ­£æ–‡å¯¹åº”çš„æ–‡æ¡£æ ‘èŠ‚ç‚¹ id ä¸º&quot;js_content&quot;ï¼Œç”¨è¿™ä¸ª selector å»è·å–å…ƒç´ åŠå…¶æ–‡æœ¬å³å¯ã€‚ counter = 0 fails = [] for record in results: url = record.content_url try: resp = requests.get(url) print('get success #' + str(counter)) except Exception: print('get failed #' + str(counter)) fails.append(record) counter += 1 content = resp.content soup = BeautifulSoup(content, 'lxml') text = soup.select('#js_content')[0].getText() # é¿å… csv å‡ºé”™ï¼Œç»Ÿä¸€æ”¹ä¸ºä¸­æ–‡é€—å· text = text.replace(',', 'ï¼Œ') record.content = text # TODO æ ‡é¢˜ä¹Ÿä¿®æ”¹ä¸ºä¸­æ–‡é€—å· record.title = record.title.replace(',', 'ï¼Œ') Â¶å†™å…¥ csv æ–‡ä»¶ å¾—åˆ°æ­£æ–‡åéœ€è¦ä¿å­˜è½åº“ã€‚åŸæœ¬è®¡åˆ’æ˜¯å†™å…¥æ•°æ®åº“ï¼Œä½†æ˜¯çœ‹åˆ° yunyoujun çš„åšèœé¡¹ç›®ä½¿ç”¨äº† csv ä½œä¸ºæ•°æ®æºï¼Œç›´æ¥ç”¨ ts ä»£ç è¯»å–æ•°æ®è€Œä¸ç”¨è¿æ¥ä¼ ç»Ÿ sql æ•°æ®åº“ï¼Œè€ƒè™‘åˆ°æœ€è¿‘ä¹Ÿæ­£åœ¨çœ‹ react çš„æ•™ç¨‹ï¼Œäºæ˜¯å†³å®šä¹Ÿè¿™ä¹ˆåšï¼ # for export to csv titles = ['title', 'datetime', 'content_url', 'content', 'type', 'cover_url'] f = open('database.csv', 'w') with f: writer = csv.DictWriter(f, fieldnames=titles) writer.writeheader() for row in results: writer.writerow(row.__dict__) Â¶è®°å½•è¯·æ±‚å¤±è´¥çš„case ç”±äºç½‘ç»œç­‰åŸå› ï¼Œæ­£æ–‡è·å–æ€»ä¼šæœ‰å¤±è´¥çš„å¯èƒ½æ€§ï¼Œè¿™é‡Œåœ¨ request.get() çš„æ—¶å€™è®°å½•ä¸‹äº†å¯¹åº”çš„ urlï¼ˆä¸Šæ–‡çš„è¯·æ±‚æ–‡ç« æ­£æ–‡éƒ¨åˆ†çš„fails.append(record)ï¼‰ï¼Œæœ€ç»ˆä¼šæ±‡æ€»è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå†æ ¹æ®æƒ…å†µè€ƒè™‘å¦‚ä½•è¡¥ä¸Šè¿™éƒ¨åˆ†æ•°æ®ã€‚ if len(fails) > 0: print('get ' + str(len(fails)) + 'failed:') for fail in fails: print(json.dumps(fail.__dict__)) å¯èƒ½æ˜¯å¾®ä¿¡å…¬ä¼—å·çš„æœåŠ¡æ¯”è¾ƒä¸ç¨³å®šæˆ–è€…æ˜¯æˆ‘ç½‘ç»œä¸ç¨³å®šï¼Œå³ä½¿åœ¨æµè§ˆå™¨ä¸­è®¿é—®æ–‡ç« ä¹Ÿæœ‰ä¸å°çš„æ¦‚ç‡å¤±è´¥ï¼Œå› æ­¤å°†è¯·æ±‚åŠ äº†é‡è¯•ï¼Œå…·ä½“è§ä¸‹é¢çš„å®Œæ•´ä»£ç ã€‚ Â¶å®Œæ•´ä»£ç  import json import requests from bs4 import BeautifulSoup import csv class Record: def __init__(self, obj): common = obj['comm_msg_info'] ext = obj['app_msg_ext_info'] self.type = common['type'] self.datetime = common['datetime'] self.title = ext['title'] self.content_url = ext['content_url'] self.cover_url = ext['cover'] self.content = '' # åŠ ä¸Šé‡è¯• def try_get(url, times): for time in range(times): try: resp = requests.get(url) if resp.status_code != 200: print('request failed for #' + str(time)) continue return resp except Exception: print('request failed for #' + str(time)) continue raise Exception('failed for ' + str(times) + ' times') if __name__ == '__main__': results = [] with open('wechat.json') as f: has_more = True while has_more: line = f.readline() if line == '' or line == '\\n': has_more = False continue objs = json.loads(line) arr = objs['list'] for obj in arr: results.append(Record(obj)) # for fetch content counter = 0 fails = [] for record in results: url = record.content_url print(url) try: resp = try_get(url, 5) print('get success #' + str(counter)) except Exception: print('get failed #' + str(counter)) fails.append(record) counter += 1 content = resp.content soup = BeautifulSoup(content, 'lxml') text = soup.select('#js_content')[0].getText() # é¿å… csv å‡ºé”™ï¼Œç»Ÿä¸€æ”¹ä¸ºä¸­æ–‡é€—å· text = text.replace(',', 'ï¼Œ') record.content = text # TODO æ ‡é¢˜ä¹Ÿä¿®æ”¹ä¸ºä¸­æ–‡é€—å· record.title = record.title.replace(',', 'ï¼Œ') # for export to csv titles = ['title', 'datetime', 'content_url', 'content', 'type', 'cover_url'] f = open('database.csv', 'w') with f: writer = csv.DictWriter(f, fieldnames=titles) writer.writeheader() for row in results: writer.writerow(row.__dict__) if len(fails) > 0: print('get ' + str(len(fails)) + 'failed:') for fail in fails: print(json.dumps(fail.__dict__)) è‡³æ­¤ï¼Œçˆ¬è™«éƒ¨åˆ†çš„ä»£ç å°±å®Œæˆå•¦ã€‚æ‰€æœ‰çš„å…¬ä¼—å·æ–‡ç« çš„å†…å®¹éƒ½å·²ç»å­˜å…¥äº† database.csvæ–‡ä»¶é‡Œäº†ã€‚åç»­å°±å¯ä»¥ä½¿ç”¨ react é¡¹ç›®å»è¯»å–å¹¶å±•ç¤ºäº†ã€‚ Â¶æ¢³ç†æ–‡ç« æ•°æ® æ‰€æœ‰æ–‡ç« ä¿¡æ¯éƒ½å¯¼å…¥åˆ°äº† CSV é‡Œäº†ï¼š åˆ›å»ºä¸€ä¸ªå‰ç«¯ React é¡¹ç›®ï¼š npx create-react-app wechat-app ç„¶åè¿›å…¥é¡¹ç›® src ç›®å½•ï¼Œå‚è€ƒ yunyoujun çš„è½¬æ¢ä»£ç ï¼Œå°† csv è½¬æ¢ä¸º json æ•°æ®æä¾›ç»™ js ä»£ç å¼•ç”¨ã€‚ ä¹‹æ‰€ä»¥è½¬æ¢çš„åŸå› æ˜¯å‰ç«¯ä»£ç åªèƒ½ import ä¸€ä¸ª json æ–‡ä»¶è€Œä¸èƒ½ import ä¸€ä¸ª csv æ–‡ä»¶ã€‚ è½¬æ¢ä»£ç ï¼š # csvConverter.ts import fs from 'fs' import path from 'path' import consola from 'consola' const csvFile = path.resolve(__dirname, '../src/asset/database.csv') const jsonFile = path.resolve(__dirname, '../src/asset/database.json') function run() &#123; const csvData = fs.readFileSync(csvFile, 'utf-8') let jsonData: Database = [] const lines = csvData.split(/\\r?\\n/) lines.slice(1).forEach((line)=> &#123; if(line) &#123; const attrs = line.split(',') jsonData.push(&#123; title: attrs[0], datetime: parseInt(attrs[1]), content_url:attrs[2], content:attrs[3], type:parseInt(attrs[4]), cover_url:attrs[5], &#125;) &#125; &#125;) fs.writeFileSync(jsonFile, JSON.stringify(jsonData)) consola.success(`Generate file success: $&#123;jsonFile&#125;`) &#125; run() export interface Item &#123; title: string datetime: number content_url: string content: string type: number cover_url: string &#125; export type Database = Item[] åœ¨ package.json æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ï¼š &#123; ... \"scripts\": &#123; ... +++ \"convert\": \"tsx src/csvConverter.ts\" &#125; &#125; åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œè½¬æ¢ä»£ç ï¼š npm run convert æ‰§è¡Œå®Œæˆåå°±å¯ä»¥çœ‹åˆ°å‡ºç°äº†ä¸€ä¸ªæ–°æ–‡ä»¶ï¼šdatabase.jsonã€‚æ­¤æ—¶å°±å¯ä»¥åœ¨é¡¹ç›®ä¸­ç›´æ¥å¼•ç”¨è¯¥æ–‡ä»¶ä½œä¸ºæ•°æ®æºå•¦ã€‚ Â¶è¾“å‡ºå±•ç¤º å‰ç«¯ä½¿ç”¨ import å¼•å…¥æ•°æ®æ–‡ä»¶ï¼š import data from './asset/database.json' éšåå°±å¯ä»¥æŒ‰ç…§ React çš„æ­£å¸¸å¼€å‘æ–¹å¼è¯»å–æ•°æ®å†™ä¸šåŠ¡ä»£ç äº†~~ï¼ˆç¨‹åºå‘˜æœ€æ“…é•¿å†™çš„è¡¨æ ¼è§†å›¾ï¼‰ å®Œæ•´ä»£ç ï¼š import React from 'react' import ReactDOM from 'react-dom/client' import './index.css' import data from './asset/database.json' // å‡½æ•°å¼ç»„ä»¶ function Record(props) &#123; let record = props.record let time = new Date(record.datetime) //æ—¥æœŸ var DD = String(time.getDate()).padStart(2, '0'); // è·å–æ—¥ var MM = String(time.getMonth() + 1).padStart(2, '0'); //è·å–æœˆä»½ï¼Œ1 æœˆä¸º 0 var yyyy = time.getFullYear(); // è·å–å¹´ // æ—¶é—´ let hh = String(time.getHours()).padStart(2, '0'); //è·å–å½“å‰å°æ—¶æ•°(0-23) let mm = String(time.getMinutes()).padStart(2, '0'); //è·å–å½“å‰åˆ†é’Ÿæ•°(0-59) let ss = String(time.getSeconds()).padStart(2, '0'); //è·å–å½“å‰ç§’æ•°(0-59) let timeformat = yyyy + '-' + MM + '-' + DD + ' ' + hh + ':' + mm + ':' + ss; return ( &lt;tr> &lt;td>&#123;timeformat&#125;&lt;/td> &lt;td>&lt;a href=&#123;record.content_url&#125;>&#123;record.title&#125;&lt;/a>&lt;/td> &lt;td>&#123;record.content.length > 50?record.content.substring(0,50):record.content + '...'&#125;&lt;/td> &lt;/tr> ) &#125; // ä¼ ç»Ÿç»„ä»¶ class DataBase extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; data: data &#125; &#125; render() &#123; let recordList = [] // åªå±•ç¤º top 10 é¢„è§ˆ for(var i = 0; i &lt;10;i++) &#123; recordList.push(&lt;Record record=&#123;this.state.data[i]&#125;/>) &#125; return ( &lt;div> &lt;p>loaded &#123;this.state.data.length&#125; records&lt;/p> &lt;table > &lt;td> &lt;th>æ—¶é—´&lt;/th> &lt;th>æ ‡é¢˜&lt;/th> &lt;th>æ­£æ–‡&lt;/th> &lt;/td> &#123;recordList&#125; &lt;/table> &lt;/div> ) &#125; &#125; const root = ReactDOM.createRoot(document.getElementById(\"root\")); root.render(&lt;DataBase />); Â¶æ€»ç»“ å¾ˆä¹…ä¸å†™åšå®¢äº†ï¼Œè¿™æ¬¡ä½¿ç”¨æŠ€æœ¯è§£å†³äº†ä¸€ä¸ªå®é™…é—®é¢˜ï¼Œæ­£å¥½å°†åšå®¢é‡æ–°è¥ä¸šèµ·æ¥~ ç”±äºè¦å»æ”»è¯»åšå£«å­¦ä½ï¼Œåé¢å†…å®¹å¯èƒ½ä¼šæ›´åå‘äºä¸€äº›ç§‘ç ”ã€‚ä¸è¿‡ä¹Ÿè¯´ä¸å‡†â”“( Â´âˆ€` )â”ã€‚"},{"title":"web åº”ç”¨å®‰å…¨è®¤è¯","path":"2020/11/17/web-åº”ç”¨å®‰å…¨è®¤è¯/","text":"è¿™ç¯‡æŒ‡å—å¸¦ä½ åˆ›å»ºä¸€ä¸ªSpring Security ç®¡ç†èµ„æºå®‰å…¨çš„ç®€å•çš„ web åº”ç”¨ã€‚ Â¶ä½ å°†ä¼šæ­å»ºâ€¦ ä¸€ä¸ª Spring MVC çš„åº”ç”¨ï¼Œé¡µé¢è¢«ä¸€ä¸ªç™»é™†è¡¨å•ä¿æŠ¤ï¼Œåªæœ‰ç‰¹å®šçš„ç”¨æˆ·å¯ä»¥è®¿é—®ã€‚ Â¶ä½ éœ€è¦â€¦ 15åˆ†é’Ÿæ—¶é—´ ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨æˆ– IDE JDK1.8+ Gradle 4+ æˆ– Maven3.2+ å¯ä»¥ç›´æ¥ç›´æ¥åœ¨ä»¥ä¸‹ IDE ä¸­å¯¼å…¥ä»£ç ï¼š Spring Tool Suite(STS) IntelliJ IDEA Â¶å¦‚ä½•å®ŒæˆæŒ‡å— è·Ÿå¤§å¤šæ•° Spring çš„æŒ‡å—ä¸€æ ·ï¼Œä½ éœ€è¦ä»ä¸€ä¸ªéª¨æ¶é¡¹ç›®å¯åŠ¨ï¼Œä¸€æ­¥ä¸€æ­¥å®Œæˆï¼›æˆ–è€…ç›´æ¥è·³è¿‡ä½ å·²ç»å¾ˆç†Ÿæ‚‰çš„é…ç½®æ­¥éª¤ã€‚ä¸¤ç§æ–¹å¼å¾—åˆ°çš„ä»£ç éƒ½èƒ½æ­£ç¡®è¿è¡Œã€‚ ä»éª¨æ¶é¡¹ç›®å¼€å§‹ï¼Œç§»æ­¥ä» Spring å¯åŠ¨å™¨å¼€å§‹ã€‚ è·³è¿‡åŸºæœ¬æ­¥éª¤ï¼Œåšå¦‚ä¸‹å‡ æ­¥ï¼š ä¸‹è½½å¹¶è§£å‹æºç é¡¹ç›®æˆ–ç”¨ Git å‘½ä»¤ï¼š git clone https://github.com/spring-guides/gs-securing-web.git æ‰“å¼€åˆ°ç›®å½• gs-securing-web/initial è·³åˆ°åˆ›å»ºä¸å®‰å…¨çš„åº”ç”¨ å½“ä½ å®Œæˆåï¼Œå¯ä»¥å¯¹æ¯” gs-securing-web/complete æ£€æŸ¥è‡ªå·±çš„ä»£ç ã€‚ Â¶ä» Spring å¯åŠ¨å™¨å¼€å§‹ æ‰€æœ‰ Spring åº”ç”¨éƒ½éœ€è¦ä» Spring å¯åŠ¨å™¨å¼€å§‹ã€‚å¯åŠ¨å™¨æä¾›å¿«é€Ÿçš„æ–¹å¼å¯¼å…¥æ‰€æœ‰éœ€è¦çš„ä¾èµ–å¹¶è‡ªåŠ¨æ‰§è¡Œå¾ˆå¤šå¯åŠ¨é¡¹ã€‚æœ¬ä¾‹éœ€è¦ Spring Web å’Œ Thymeleaf ä¾èµ–ã€‚ ä¸‹é¢æ˜¯é€‰æ‹© Maven æ—¶éœ€è¦åˆ›å»ºçš„ pom/xml æ–‡ä»¶ã€‚ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"> &lt;modelVersion>4.0.0&lt;/modelVersion> &lt;parent> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-parent&lt;/artifactId> &lt;version>2.3.2.RELEASE&lt;/version> &lt;relativePath/> &lt;!-- lookup parent from repository --> &lt;/parent> &lt;groupId>com.example&lt;/groupId> &lt;artifactId>securing-web&lt;/artifactId> &lt;version>0.0.1-SNAPSHOT&lt;/version> &lt;name>securing-web&lt;/name> &lt;description>Demo project for Spring Boot&lt;/description> &lt;properties> &lt;java.version>1.8&lt;/java.version> &lt;/properties> &lt;dependencies> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-thymeleaf&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-web&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-test&lt;/artifactId> &lt;scope>test&lt;/scope> &lt;exclusions> &lt;exclusion> &lt;groupId>org.junit.vintage&lt;/groupId> &lt;artifactId>junit-vintage-engine&lt;/artifactId> &lt;/exclusion> &lt;/exclusions> &lt;/dependency> &lt;/dependencies> &lt;build> &lt;plugins> &lt;plugin> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId> &lt;/plugin> &lt;/plugins> &lt;/build> &lt;/project> ä¸‹é¢æ˜¯é€‰æ‹© Gradle æ—¶éœ€è¦åˆ›å»ºçš„ build.gradle æ–‡ä»¶ã€‚ plugins &#123; id &#39;org.springframework.boot&#39; version &#39;2.3.2.RELEASE&#39; id &#39;io.spring.dependency-management&#39; version &#39;1.0.8.RELEASE&#39; id &#39;java&#39; &#125; group &#x3D; &#39;com.example&#39; version &#x3D; &#39;0.0.1-SNAPSHOT&#39; sourceCompatibility &#x3D; &#39;1.8&#39; repositories &#123; mavenCentral() &#125; dependencies &#123; implementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39; implementation &#39;org.springframework.boot:spring-boot-starter-web&#39; testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) &#123; exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39; &#125; &#125; test &#123; useJUnitPlatform() &#125; Â¶åˆ›å»ºä¸å®‰å…¨çš„ web åº”ç”¨ åœ¨åº”ç”¨å®‰å…¨ç»„ä»¶åˆ° web åº”ç”¨ä¸­å‰ï¼Œéœ€è¦å…ˆæœ‰ä¸€ä¸ª web åº”ç”¨ã€‚æœ¬èŠ‚å¸¦ä½ åˆ›å»ºä¸€ä¸ªç®€å•çš„ web åº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨ä¸‹ä¸€èŠ‚ä¸­ä½¿ç”¨ Spring Security æ¥å…¥å®‰å…¨ã€‚ åº”ç”¨åŒ…å« 2 ä¸ªç®€å•é¡µé¢ï¼šé¦–é¡µå’Œâ€œHello Worldâ€é¡µé¢ã€‚é¦–é¡µç”¨å¦‚ä¸‹ Thymeleaf æ¨¡æ¿å®šä¹‰ï¼ˆä½äºï¼‰src/main/resources/templates/home.htmlï¼š &lt;!DOCTYPE html> &lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:th=\"https://www.thymeleaf.org\" xmlns:sec=\"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3\"> &lt;head> &lt;title>Spring Security Example&lt;/title> &lt;/head> &lt;body> &lt;h1>Welcome!&lt;/h1> &lt;p>Click &lt;a th:href=\"@&#123;/hello&#125;\">here&lt;/a> to see a greeting.&lt;/p> &lt;/body> &lt;/html> è§†å›¾åªæ˜¯ç®€å•çš„åŒ…å«ä¸€ä¸ªæŒ‡å‘ /helloé¡µé¢çš„é“¾æ¥ï¼Œé¡µé¢å®šä¹‰å¦‚ä¸‹ï¼ˆä½äºsrc/main/resources/templates/hello.htmlï¼‰ï¼š &lt;!DOCTYPE html> &lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:th=\"https://www.thymeleaf.org\" xmlns:sec=\"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3\"> &lt;head> &lt;title>Hello World!&lt;/title> &lt;/head> &lt;body> &lt;h1>Hello world!&lt;/h1> &lt;/body> &lt;/html> è¿™ä¸ª web åº”ç”¨ç¨‹åºæ˜¯åŸºäº Spring MVC çš„ï¼Œå› æ­¤éœ€è¦é…ç½®Spring MVC è®©è§†å›¾æ§åˆ¶å™¨æš´éœ²å‡ºè¿™äº›æ¨¡æ¿ï¼Œä¸‹é¢åˆ—å‡ºï¼ˆä½äº src/main/java/com/example/securingweb/MvcConfig.javaï¼‰å±•ç¤ºäº† Spring MVC åº”ç”¨çš„é…ç½®ç±»ï¼š package com.example.securingweb; import org.springframework.context.annotation.Configuration; import org.springframework.web.servlet.config.annotation.ViewControllerRegistry; import org.springframework.web.servlet.config.annotation.WebMvcConfigurer; @Configuration public class MvcConfig implements WebMvcConfigurer &#123; public void addViewControllers(ViewControllerRegistry registry) &#123; registry.addViewController(\"/home\").setViewName(\"home\"); registry.addViewController(\"/\").setViewName(\"home\"); registry.addViewController(\"/hello\").setViewName(\"hello\"); registry.addViewController(\"/login\").setViewName(\"login\"); &#125; &#125; addViewControllers() æ–¹æ³•ï¼ˆé‡å†™äº† WebMvcConfigurer ç±»çš„åŒåæ–¹æ³•ï¼‰æ·»åŠ äº† 4 ä¸ªè§†å›¾æ§åˆ¶å™¨ã€‚2 ä¸ªå…³è”äº†å®šä¹‰åœ¨ home.html æ–‡ä»¶çš„ home è§†å›¾ï¼Œå¦ 1 ä¸ªå…³è”äº†hello.html æ–‡ä»¶çš„ hello è§†å›¾ã€‚ç¬¬å››ä¸ªè§†å›¾æ§åˆ¶å™¨å…³è”äº† login è§†å›¾ï¼Œä¸‹ä¸€èŠ‚ä¸­ä¼šåˆ›å»ºã€‚ æ­¤æ—¶ï¼Œä½ å¯ä»¥è·³è½¬åˆ°â€œè¿è¡Œåº”ç”¨ç¨‹åºâ€å¹¶ä¸”è¿è¡Œä¸ç”¨ç™»å½•å°±å¯è®¿é—®ä»»æ„ä½ç½®çš„åº”ç”¨ç¨‹åºã€‚ æ—¢ç„¶æ­¤æ—¶åº”ç”¨ç¨‹åºè¿˜æ²¡æ¥å…¥å®‰å…¨ï¼Œè¿™æ—¶æ¥æ·»åŠ å®‰å…¨ç»„ä»¶ã€‚ Â¶é…ç½® Spring Security å‡è®¾ä½ å¸Œæœ›é˜»æ­¢æœªæˆæƒç”¨æˆ·è®¿é—® /hello è·¯å¾„ä¸‹çš„é¡µé¢ã€‚å½“å‰ï¼Œè®¿é—®è€…ç‚¹å‡»é¦–é¡µé“¾æ¥ï¼Œå°†ä¼šä¸å—é˜»æ­¢çœ‹åˆ°é—®å€™é¡µã€‚ä½ éœ€è¦æ·»åŠ ä¸€å±‚å±éšœè¿«ä½¿è®¿é—®è€…çœ‹åˆ°é¡µé¢å‰å¿…é¡»ç™»å½•ã€‚ é€šè¿‡é›†æˆ Spring Security åˆ°é¡¹ç›®ä¸­å®ç°ã€‚å½“ Spring Security ä½äºç±»è·¯å¾„ä¸‹æ—¶ï¼ŒSpring è‡ªåŠ¨å°†æ‰€æœ‰ HTTP æ¥å£ç”¨ â€œbasicâ€ é‰´æƒã€‚ä¸è¿‡ä½ å¯ä»¥ç»§ç»­è‡ªå®šä¹‰å®‰å…¨é…ç½®ã€‚é¦–å…ˆéœ€è¦æ·»åŠ  Spring Security åˆ°ç±»è·¯å¾„ä¸‹ã€‚ ä½¿ç”¨ Gradleï¼Œæ·»åŠ ä»¥ä¸‹ 2 è¡Œåˆ° build.gradle æ–‡ä»¶çš„ dependencies ä¸€çº§ä¸‹ï¼Œï¼ˆä¸€ä¸ªç”¨åœ¨åº”ç”¨ä¸­ï¼Œä¸€ä¸ªç”¨æ¥æµ‹è¯•ï¼‰ï¼š implementation &#39;org.springframework.boot:spring-boot-starter-security&#39; implementation &#39;org.springframework.security:spring-security-test&#39; ä¸‹é¢æ˜¯å®Œæ•´çš„ build.gradleæ–‡ä»¶ï¼š plugins &#123; id &#39;org.springframework.boot&#39; version &#39;2.3.2.RELEASE&#39; id &#39;io.spring.dependency-management&#39; version &#39;1.0.8.RELEASE&#39; id &#39;java&#39; &#125; group &#x3D; &#39;com.example&#39; version &#x3D; &#39;0.0.1-SNAPSHOT&#39; sourceCompatibility &#x3D; &#39;1.8&#39; repositories &#123; mavenCentral() &#125; dependencies &#123; implementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39; implementation &#39;org.springframework.boot:spring-boot-starter-web&#39; implementation &#39;org.springframework.boot:spring-boot-starter-security&#39; implementation &#39;org.springframework.security:spring-security-test&#39; testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) &#123; exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39; &#125; &#125; test &#123; useJUnitPlatform() &#125; ä½¿ç”¨ Maven éœ€è¦æ·»åŠ ä¸€ä¸‹ 2 éƒ¨åˆ†ï¼ˆä¸€ä¸ªç”¨äºåº”ç”¨ï¼Œä¸€ä¸ªç”¨äºæµ‹è¯•ï¼‰åˆ° pom.xml æ–‡ä»¶çš„ &lt;denpendencies&gt;å…ƒç´ ä¸‹ï¼š &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-security&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.security&lt;/groupId> &lt;artifactId>spring-security-test&lt;/artifactId> &lt;scope>test&lt;/scope> &lt;/dependency> ä¸‹é¢æ˜¯å®Œæ•´çš„ pom.xmlæ–‡ä»¶ï¼š &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"> &lt;modelVersion>4.0.0&lt;/modelVersion> &lt;parent> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-parent&lt;/artifactId> &lt;version>2.3.2.RELEASE&lt;/version> &lt;relativePath/> &lt;!-- lookup parent from repository --> &lt;/parent> &lt;groupId>com.example&lt;/groupId> &lt;artifactId>securing-web&lt;/artifactId> &lt;version>0.0.1-SNAPSHOT&lt;/version> &lt;name>securing-web&lt;/name> &lt;description>Demo project for Spring Boot&lt;/description> &lt;properties> &lt;java.version>1.8&lt;/java.version> &lt;/properties> &lt;dependencies> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-thymeleaf&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-web&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-security&lt;/artifactId> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.security&lt;/groupId> &lt;artifactId>spring-security-test&lt;/artifactId> &lt;scope>test&lt;/scope> &lt;/dependency> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-test&lt;/artifactId> &lt;scope>test&lt;/scope> &lt;exclusions> &lt;exclusion> &lt;groupId>org.junit.vintage&lt;/groupId> &lt;artifactId>junit-vintage-engine&lt;/artifactId> &lt;/exclusion> &lt;/exclusions> &lt;/dependency> &lt;/dependencies> &lt;build> &lt;plugins> &lt;plugin> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-maven-plugin&lt;/artifactId> &lt;/plugin> &lt;/plugins> &lt;/build> &lt;/project> ä»¥ä¸‹å®‰å…¨é…ç½®ï¼ˆä½äº src/main/java/com/example/securingweb/WebSecurityConfig.javaï¼‰ç¡®ä¿åªæœ‰é‰´æƒäº†çš„ç”¨æˆ·æ‰èƒ½çœ‹åˆ°æ¬¢è¿é¡µï¼š package com.example.securingweb; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.security.config.annotation.web.builders.HttpSecurity; import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity; import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter; import org.springframework.security.core.userdetails.User; import org.springframework.security.core.userdetails.UserDetails; import org.springframework.security.core.userdetails.UserDetailsService; import org.springframework.security.provisioning.InMemoryUserDetailsManager; @Configuration @EnableWebSecurity public class WebSecurityConfig extends WebSecurityConfigurerAdapter &#123; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .authorizeRequests() .antMatchers(\"/\", \"/home\").permitAll() .anyRequest().authenticated() .and() .formLogin() .loginPage(\"/login\") .permitAll() .and() .logout() .permitAll(); &#125; @Bean @Override public UserDetailsService userDetailsService() &#123; UserDetails user = User.withDefaultPasswordEncoder() .username(\"user\") .password(\"password\") .roles(\"USER\") .build(); return new InMemoryUserDetailsManager(user); &#125; &#125; WebSecurityConfigç±»è¢« @EnableWebSecurity æ³¨è§£äº†ï¼Œå¯ç”¨äº† Spring Security çš„ web å®‰å…¨æ”¯æŒå¹¶æä¾›äº† Spring MVC çš„é›†æˆã€‚åŒæ—¶ç»§æ‰¿äº† WebSecurityConfigurerAdapterç±»ï¼Œé‡å†™äº†ä¸€ç»„æ–¹æ³•ç”¨æ¥é…ç½®ä¸€äº›ç‰¹å®šçš„ web å®‰å…¨é…ç½®ã€‚ configure(HttpSecurity) æ–¹æ³•å®šä¹‰äº†å“ªäº› URL è·¯å¾„éœ€è¦è¢«é‰´æƒã€‚è¿™é‡Œ / å’Œ /home ç‰¹åˆ«è¢«æ ‡æ³¨ä¸è¦é‰´æƒï¼Œå…¶ä»–æ‰€æœ‰è·¯å¾„éƒ½è¦è¢«é‰´æƒã€‚ å½“ç”¨æˆ·æˆåŠŸç™»å½•åï¼Œä»–ä»¬è¢«é‡å®šå‘åˆ°ä¹‹å‰è¯·æ±‚çš„éœ€è¦é‰´æƒçš„é¡µé¢ã€‚æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„ /login é¡µé¢ï¼ˆä½¿ç”¨ loginPage() æŒ‡å®šï¼‰ï¼Œä»»ä½•äººéƒ½èƒ½è®¿é—®ã€‚ userDetailsService()æ–¹æ³•è®¾ç½®äº†å•ä¸ªç”¨æˆ·çš„å†…å­˜å­˜å‚¨ï¼Œç»™å®šäº†ç”¨æˆ·åä¸º userï¼Œå¯†ç ä¸º passwordï¼Œè§’è‰²ä¸º USERã€‚ ç°åœ¨éœ€è¦åˆ›å»ºç™»å½•é¡µã€‚å·²ç»æœ‰äº† login è§†å›¾çš„è§†å›¾æ§åˆ¶å™¨äº†ï¼Œåªéœ€è¦åˆ›å»ºè§†å›¾å³å¯ï¼Œå¦‚ä¸‹ï¼ˆä½äº src/main/resources/templates/login.htmlï¼‰ï¼š &lt;!DOCTYPE html> &lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:th=\"https://www.thymeleaf.org\" xmlns:sec=\"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3\"> &lt;head> &lt;title>Spring Security Example &lt;/title> &lt;/head> &lt;body> &lt;div th:if=\"$&#123;param.error&#125;\"> Invalid username and password. &lt;/div> &lt;div th:if=\"$&#123;param.logout&#125;\"> You have been logged out. &lt;/div> &lt;form th:action=\"@&#123;/login&#125;\" method=\"post\"> &lt;div>&lt;label> User Name : &lt;input type=\"text\" name=\"username\"/> &lt;/label>&lt;/div> &lt;div>&lt;label> Password: &lt;input type=\"password\" name=\"password\"/> &lt;/label>&lt;/div> &lt;div>&lt;input type=\"submit\" value=\"Sign In\"/>&lt;/div> &lt;/form> &lt;/body> &lt;/html> Themeleaf æ¨¡æ¿å±•ç¤ºäº†ä¸€ä¸ªè®°å½•ç”¨æˆ·åå’Œå¯†ç çš„è¡¨å•ï¼Œå¹¶ post æ–¹æ³•ä¼ åˆ° /loginã€‚Spring Security é…ç½®åï¼Œæä¾›ä¸€ä¸ªæ‹¦æˆªè¯·æ±‚çš„è¿‡æ»¤å™¨å¹¶å¯¹ç”¨æˆ·é‰´æƒã€‚å¦‚æœç”¨æˆ·é‰´æƒå¤±è´¥åˆ™ä¼šé‡å®šå‘åˆ° /login?errorï¼Œå¹¶ä¸”å±•ç¤ºç›¸å…³çš„é”™è¯¯ä¿¡æ¯ã€‚ä¸€æ—¦æˆåŠŸç™»å‡ºï¼Œåº”ç”¨ä¼šé‡å®šå‘åˆ° /login?logoutï¼Œå¹¶ä¸”é¡µé¢ä¼šå±•ç¤ºæˆåŠŸä¿¡æ¯ã€‚ æœ€åï¼Œä½ éœ€è¦æä¾›è®¿é—®è€…ä¸€ç§å±•ç¤ºå½“å‰ç”¨æˆ·å’Œç™»å‡ºçš„æ–¹å¼ã€‚å› æ­¤ï¼Œæ›´æ–° hello.html å‘å½“å‰ç”¨æˆ·æ‰“æ‹›å‘¼å¹¶å¢åŠ ä¸€ä¸ª Sign Out è¡¨å•ï¼Œå¦‚ä¸‹ï¼ˆä½äº src/main/resources/templates/hello.htmlï¼‰ï¼š &lt;!DOCTYPE html> &lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:th=\"https://www.thymeleaf.org\" xmlns:sec=\"https://www.thymeleaf.org/thymeleaf-extras-springsecurity3\"> &lt;head> &lt;title>Hello World!&lt;/title> &lt;/head> &lt;body> &lt;h1 th:inline=\"text\">Hello [[$&#123;#httpServletRequest.remoteUser&#125;]]!&lt;/h1> &lt;form th:action=\"@&#123;/logout&#125;\" method=\"post\"> &lt;input type=\"submit\" value=\"Sign Out\"/> &lt;/form> &lt;/body> &lt;/html> ä½¿ç”¨ Spring Security é›†æˆçš„ HttpServletRequest#getRemoteUser()æ¥å±•ç¤ºç”¨æˆ·åã€‚ç™»å‡ºè¡¨å•æäº¤ä¸€ä¸ª POST è¯·æ±‚åˆ° /logoutã€‚å½“æˆåŠŸç™»å‡ºåï¼Œç”¨æˆ·ä¼šé‡å®šå‘åˆ° /login?logoutã€‚ Â¶è¿è¡Œåº”ç”¨ Spring åˆ›å»ºå™¨å·²ç»ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªåº”ç”¨ç±»ã€‚æ­¤æ—¶ä½ ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªç±»ã€‚ä¸‹é¢å±•ç¤ºäº†è¿™ä¸ªåº”ç”¨å¯åŠ¨ç±»ï¼ˆä½äº src/main/java/com/example/securingweb/SecuringWebApplication.javaï¼‰ï¼š package com.example.securingweb; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; @SpringBootApplication public class SecuringWebApplication &#123; public static void main(String[] args) throws Throwable &#123; SpringApplication.run(SecuringWebApplication.class, args); &#125; &#125; Â¶æ„å»ºå¯æ‰§è¡Œ JAR æ–‡ä»¶ å¯ä»¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨ Gradle æˆ– Maven è¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºã€‚ä¹Ÿå¯ä»¥æ„å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¾èµ–ã€ç±»å’Œèµ„æºçš„å¯æ‰§è¡Œçš„ JAR æ–‡ä»¶å¹¶ç›´æ¥è¿è¡Œå®ƒã€‚æ„å»º JAR æ–‡ä»¶æ›´æ–¹ä¾¿å»åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­è·¨ç¯å¢ƒæ‰“åŒ…ï¼Œç‰ˆæœ¬ç®¡ç†å’Œéƒ¨ç½²æœåŠ¡ã€‚ å¦‚æœä½¿ç”¨ Gradleï¼Œå¯ä»¥ä½¿ç”¨ ./gradlew bootRun å¯åŠ¨åº”ç”¨ã€‚æˆ–è€…ä¹Ÿå¯ä»¥ç”¨ ./gradlew build æ„å»º JAR æ–‡ä»¶ç„¶åç”¨ä¸‹é¢å‘½ä»¤è¿è¡Œè¿™ä¸ª JAR æ–‡ä»¶ï¼š java -jar build/libs/gs-securng-web-0.1.0.jar å¦‚æœä½¿ç”¨ Mavenï¼Œå¯ä»¥ä½¿ç”¨ ./mvnw spring-boot:run å¯åŠ¨åº”ç”¨ã€‚æˆ–è€…ä¹Ÿå¯ä»¥ç”¨ ./mvnw clean package æ„å»º JAR æ–‡ä»¶ç„¶åç”¨ä¸‹é¢å‘½ä»¤è¿è¡Œè¿™ä¸ª JAR æ–‡ä»¶ï¼š java -jar target/gs-securing-web-0.1.0.jar ä¸€æ—¦é¡¹ç›®å¯åŠ¨ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:8080ã€‚ä½ å°†ä¼šçœ‹åˆ°ä¸»é¡µï¼Œå¦‚ä¸‹å›¾ï¼š å½“ä½ ç‚¹å‡»é“¾æ¥ï¼Œä¼šå°è¯•å°†ä½ å¸¦åˆ° hello çš„æ¬¢è¿é¡µã€‚ä½†æ˜¯è¯¥é¡µé¢æ˜¯éœ€è¦é‰´æƒçš„ï¼Œå¹¶ä¸”ä½ è¿˜æ²¡ç™»å½•ï¼Œæ‰€ä»¥ä¼šé‡å®šå‘åˆ°ç™»å½•é¡µï¼Œå¦‚ä¸‹å›¾: å¦‚æœä½ æ˜¯ç›´æ¥è·³åˆ°è¿™é‡Œï¼Œæ˜¯æœªæ¥å…¥é‰´æƒçš„ç‰ˆæœ¬ï¼Œå°†ä¸ä¼šçœ‹åˆ°ç™»å½•é¡µã€‚éœ€è¦è¿”å›å»ç»§ç»­å†™å‰©ä¸‹é‰´æƒçš„ä»£ç ã€‚ åœ¨ç™»å½•é¡µï¼Œä½¿ç”¨æµ‹è¯•ç”¨æˆ·ç™»å½•ï¼Œåˆ†åˆ«ä½¿ç”¨ user å’Œ password å¡«å…¥ç”¨æˆ·åå’Œå¯†ç æ¡†ã€‚æäº¤ç™»å½•è¡¨å•ï¼Œå°†ä¼šè¢«æˆåŠŸé‰´æƒå¹¶é‡å®šå‘åˆ°æ¬¢è¿é¡µï¼Œå¦‚ä¸‹å›¾ï¼š å¦‚æœç‚¹å‡»ç™»å‡ºæŒ‰é’®ï¼Œé‰´æƒå°†ä¼šè¢«æ³¨é”€ï¼Œä¼šè¿”å›åˆ°ç™»å½•é¡µï¼Œå¹¶æœ‰ä¸€æ¡æç¤ºä¿¡æ¯ï¼Œå‘ŠçŸ¥ä½ å·²ç»ç™»å‡ºäº†ã€‚ Â¶æ€»ç»“ æ­å–œï¼ä½ å·²ç»å¼€å‘äº†ä¸€ä¸ªç®€å•çš„ç”¨ Spring Security é‰´æƒçš„ web åº”ç”¨ã€‚"},{"title":"GitLab CI æ­å»ºæŒ‡å—","path":"2020/10/26/GitLab-CI-æ­å»ºæŒ‡å—/","text":"èµ·å›  äº‹æƒ…çš„èµ·å› ä¹Ÿæ˜¯æ¥è‡ªå·¥ä½œä¸­è·Ÿæˆ‘ä»¬æ—¥å¸¸å¯†åˆ‡ç›¸å…³ï¼Œè€Œåˆæ²¡æœ‰æœºä¼šæ¥è§¦åˆ°çš„ä¸œè¥¿ï¼šCIã€‚é¡¹ç›®è„šæ‰‹æ¶è‡ªå¸¦äº† CI è„šæœ¬ï¼Œåªéœ€è¦ç¨ä½œä¿®æ”¹å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›GitLab ä¸Šçš„é¡¹ç›®çš„ CI é…åˆä¹Ÿä¸éœ€è¦æˆ‘ä»¬ç®¡ï¼Œç›´æ¥ä½¿ç”¨Public Runnerå°±è¡Œäº†ã€‚æ—¶é—´é•¿äº†è‡ªç„¶å°±å¯¹è¿™æ–¹é¢æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œæƒ³çŸ¥é“å…¶ä¸­çš„åŸç†ã€‚æ­£å¥½æ­å»ºäº†æœåŠ¡å™¨ï¼Œéƒ¨ç½²å¥½äº† GitLabï¼Œäºæ˜¯è¯´å¹²å°±å¹²ï¼Œå¼€å§‹ç€æ‰‹åšè‡ªå·±çš„ GitLab CI é…ç½®ã€‚ è¿‡ç¨‹ Â¶CI è„šæœ¬ å·²ç»çŸ¥é“äº†åœ¨é¡¹ç›®ä¸Šæ‰§è¡Œçš„ä¸œè¥¿ï¼ŒåŒ…æ‹¬æ¨ä»£ç ã€æ‰“ tag éƒ½ä¼šå¯¼è‡´ CI çš„è‡ªåŠ¨æ‰§è¡Œï¼Œè€Œä»€ä¹ˆæƒ…å†µæ‰§è¡Œä»€ä¹ˆ CI çš„ stage å°±ç”±é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„.gitlab-ci.yml æ–‡ä»¶å†³å®šã€‚å› æ­¤æ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®çš„ CI æ–‡ä»¶çœ‹çœ‹æ˜¯æ€ä¹ˆå†™çš„ï¼š image: xxxxxx:maven-openjdk8-onbuild stages: - build - release test: stage: build script: - rm -rf test_target&#x2F;* &amp;&amp; mkdir -p test_target &amp;&amp; mvn -U clean package -Dmaven.test.skip&#x3D;true -P test - cp -a oms-web&#x2F;target&#x2F;oms-web.jar test_target&#x2F;ROOT.jar - chmod +x .&#x2F;test_target&#x2F;ROOT.jar - cp -rf .&#x2F;.dockerignore .&#x2F;test_target &amp;&amp; cp -rf .&#x2F;Dockerfile .&#x2F;test_target environment: test only: - &#x2F;^neo-java-test-.*$&#x2F; except: - branches artifacts: paths: - test_target&#x2F;* untracked: false neo-image-upload: stage: release image: xxxxx:docker19.06-base-image script: - mi_env&#x3D;$(echo $CI_COMMIT_TAG | awk -F &#39;-&#39; &#39;&#123;print $3&#125;&#39;) - cd .&#x2F;$mi_env&#39;_target&#39; - docker login hub.pf.xiaomi.com -u $HUBUSER -p $HUBPASS - docker build . -t xxxxxx.xxx.xxx&#x2F;$(echo $CI_COMMIT_TAG | awk -F &#39;-&#39; &#39;&#123;print $2&quot;-&quot;$3&#125;&#39;):$CI_COMMIT_TAG - docker push xxxxxxxxx.xxx.xxx]ã€&#x2F;$(echo $CI_COMMIT_TAG | awk -F &#39;-&#39; &#39;&#123;print $2&quot;-&quot;$3&#125;&#39;):$CI_COMMIT_TAG environment: name: neo only: - &#x2F;^neo-.*$&#x2F; except: - branches ... é¦–å…ˆä¸Šæ¥æ˜¯å…ˆå®šä¹‰CI éœ€è¦çš„åŸºæœ¬ docker é•œåƒï¼Œä¸ç®¡ä½  CI çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Œæœ€ç»ˆéƒ½æ˜¯è¦æ‰§è¡Œä¸€æ®µä»£ç ï¼Œè¿™éƒ¨åˆ†ä»£ç ä¸€å®šéœ€è¦ä¸ªç¯å¢ƒå»æ‰§è¡Œçš„ï¼Œè¿™ä¸ªç¯å¢ƒå°±æ˜¯æ¥è‡ªäºå£°æ˜çš„é•œåƒç±»å‹ã€‚ä¸‹é¢æ˜¯å®šä¹‰äº† 2 ä¸ªæ‰§è¡Œé˜¶æ®µï¼šbuild å’Œ releaseã€‚åœ¨ gitlab å¹³å°ä¸Š CI çš„è¿‡ç¨‹çŠ¶æ€å›¾å¯ä»¥çŸ¥é“ï¼šè¿™é‡Œæ˜¯å®šä¹‰äº†ä»–ä»¬æ‰§è¡Œçš„å…ˆåé¡ºåºï¼šéœ€è¦å…ˆæ„å»ºå¥½é¡¹ç›®çš„äº§å‡ºå¯æ‰§è¡ŒåŒ…ï¼Œå†æ¨é€åˆ°æŒ‡å®šçš„å®¹å™¨ä¸­ä¾›å¯åŠ¨ã€‚ä¸‹é¢ 2 éƒ¨åˆ†åˆ™æ˜¯å®šä¹‰äº†å…·ä½“çš„ stage çš„æ¡ä»¶å’Œæ‰§è¡Œçš„å†…å®¹ã€‚stageï¼šæŒ‡å®šä¸ºå“ªä¸ªæ‰§è¡Œé˜¶æ®µã€‚imageï¼šæŒ‡å®šè¯¥é˜¶æ®µä½¿ç”¨çš„é•œåƒã€‚scriptï¼šè¯¥é˜¶æ®µæ‰§è¡Œçš„ä»£ç ï¼Œä¸€èˆ¬ä¸º shell è„šæœ¬ã€‚onlyï¼šæŒ‡å®šè¯¥é˜¶æ®µæ‰§è¡Œçš„è§¦å‘æ¡ä»¶ï¼Œä¸€èˆ¬ä¸ºåˆ†æ”¯æˆ– tag åã€‚ æ ¹æ®ä¸Šé¢çš„ ci è„šæœ¬ï¼Œæˆ‘å®šä¹‰ä¸€ä¸ªæœ€ç®€å•çš„ CI è„šæœ¬ï¼š image: docker:dind stages: - stage1 - stage2 stage-first: stage: stage1 script: - echo 'I am first executed!' only: - master artifacts: paths: - prod_target/* stage-second: stage: stage2 script: - echo 'I am second executed!' only: - master å®šä¹‰äº† 2 ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ‰“å°å­—ç¬¦ä¸²ã€‚ Â¶CI Runner å®Œæˆä¸Šé¢çš„ CI è„šæœ¬åæˆ‘è¿«ä¸åŠå¾…çš„å°†åˆ†æ”¯åˆåˆ° master å¹¶æ¨é€åˆ°è¿œç¨‹ï¼ŒæœŸæœ›ä»–èƒ½ç«‹åˆ»æ‰§è¡Œå‡ºç»“æœã€‚å¯æ˜¯ GitLab ä¸Šæ˜¾ç¤ºçš„CI çŠ¶æ€ä¸ºï¼šPendingï¼šNo Runner available for pipelineã€‚è¡¨æ˜æ²¡æœ‰å¯ä»¥ç”¨æ¥æ‰§è¡ŒCI çš„ Runnerã€‚é‚£ä¹ˆå°±éœ€è¦æŸ¥æ‰¾è·Ÿ Runner ç›¸å…³çš„ä¿¡æ¯ã€‚å¾—çŸ¥ï¼šRunner æ˜¯æ”¯æŒå¤šèŠ‚ç‚¹çš„ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡ï¼Œåœ¨æœºå™¨ä¸Šå¯åŠ¨ Runner ç®¡ç†æœåŠ¡åæ³¨å†Œä¸€ä¸ªæ–°çš„ Runnerï¼Œå°†å…¶ç»‘å®šåˆ°å¯¹åº”çš„ GitLab ä¸Šï¼ˆå¯ä»¥ç»‘å®šä¸ºä¸€ä¸ª GitLab åº“å…¬ç”¨æˆ–è€…ä¸€ä¸ªæŒ‡å®š repository ä¸“ç”¨ï¼‰å°±å¯ä»¥ç”¨æ¥æ‰§è¡Œ CI äº†ã€‚ Â¶å®‰è£… gitlab-runner æ­¤æ—¶æˆ‘å°±å»æ‰¾ Runner çš„å®‰è£…äº†ã€‚æˆ‘ç›´æ¥è¿è¡Œï¼š sudo apt-get install gitlab-runner å®‰è£…æˆåŠŸï¼Œä½†æ˜¯æ­¤æ—¶æ‰§è¡Œå†æ‰§è¡Œï¼š sudo gitlab-runner register æƒ³æ³¨å†Œä¸€ä¸ª Runner å¹¶ç»‘å®šåˆ°æˆ‘çš„ GitLab ä¸Šå‘ç°æ€»æ˜¯å¤±è´¥ã€‚ Â¶Runner çš„å‘ ç»è¿‡ä¸€ç•ªæœç´¢ï¼ŒçŸ¥é“äº† GitLab å’Œ Runner çš„ç‰ˆæœ¬æœ‰çº¦æŸï¼š8.X ç‰ˆæœ¬çš„ GitLab åªæ”¯æŒ 1.X ç‰ˆæœ¬çš„ Runner æœåŠ¡ï¼Œè€Œ apt è‡ªåŠ¨å®‰è£…çš„ä¸º 13.X ç‰ˆæœ¬çš„äº†ï¼Œæ— æ³•å…¼å®¹ã€‚äºæ˜¯å°±éœ€è¦å¼€å§‹æœç´¢äº’è”ç½‘ä¸Šçš„ 1.X ç‰ˆæœ¬çš„ Runner å®‰è£…ç¨‹åºã€‚ Runner çš„ RELEASEï¼šæ²¡æœ‰ 1.X ç‰ˆæœ¬ã€‚ Runner çš„ Tag åˆ—è¡¨ï¼šæœ‰ 1.X ç‰ˆæœ¬çš„ tag ä½†æ˜¯æ²¡æœ‰ artifacts äº§ç‰©ã€‚ å„å¤§é•œåƒç«™ï¼šåªæœ‰ 10.X å¼€å§‹ç‰ˆæœ¬çš„ Runner å®‰è£…ç¨‹åºã€‚ çœ‹ä¼¼å·²ç»å±±ç©·æ°´å°½äº†ã€‚å¿½ç„¶çµå…‰ä¸€ç°ï¼šä½ è™½ç„¶å¯ä»¥åˆ é™¤ RELEASE çš„æ—§ç‰ˆæœ¬ï¼Œä½†æ˜¯ä½ æ‰“ç‰ˆæœ¬ tag çš„é‚£æ¬¡ CI ä¸€å®šæœ‰è¾“å‡ºåˆ°çš„è·¯å¾„ï¼Œæˆ‘å°±å»è¿½æº¯ä½ é‚£ä¸ªç”Ÿæˆ artifact çš„è·¯å¾„ä¸å°±å¯ä»¥äº†ï¼Ÿæœç„¶ï¼Œè¢«æˆ‘æ‰¾åˆ°äº†å¯¼å‡ºåˆ° AWS çš„æ–‡ä»¶~ æ‰¾åˆ°äº†å®‰è£…æ–‡ä»¶åå°±æ˜¯é¡ºåˆ©çš„å®‰è£…è¿‡ç¨‹~ç›´æ¥ç”¨å‘½ä»¤è¯´æ˜å§ï¼š scp ~/Downloads/gitlab-ci-multi-runner_i386.deb haoxingxiao@XXX.XXX.XXX.XXX:~/ ssh XXX.XXX.XXX.XXX sudo dpkg -i gitlab-ci-multi-runner_i386.deb sudo gitlab-runner register (gitlab url) > http://XXXXXXXX.XXX.XXX/ci/ // æ³¨æ„è¿™é‡Œéœ€è¦æä¾› /ci è·¯å¾„ (token) > XXXXXXXXXXXXXX (runner name) > tencent-cloud-runner (tags) > tencent,common (allow untagged task?) > true (choose type:docker,shell &amp; etc.?) > docker Â¶æ‰§è¡Œ CI é…ç½®å¥½ Runner åå°±å¯ä»¥åœ¨ GitLab ä¸Šçœ‹åˆ°åˆ›å»ºæˆåŠŸçš„ Runner äº†: è¿™é‡Œæˆ‘å·²ç»æŠŠç§Ÿçš„é˜¿é‡Œäº‘æœåŠ¡å™¨å’Œè…¾è®¯äº‘çš„æœåŠ¡å™¨éƒ½é…ç½®ä¸Šå»äº†ï¼Œæ„æˆäº†å¤šä¸ªèŠ‚ç‚¹çš„ Runner é›†ç¾¤ï¼Œå½“ CI ä»»åŠ¡è¿›å…¥åä¼šè‡ªåŠ¨å¯»æ‰¾ç©ºé—²çš„ Runner å»æ‰§è¡Œã€‚å…¶å®åŒä¸€ä¸ªå®¹å™¨ç»‘å®šå¤šä¸ª Runner ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡è´Ÿè½½å°±éƒ½åœ¨ä¸€å°å®¹å™¨ä¸Šäº†ã€‚ è€Œåˆšæ‰ Pending çš„ CI ä¹Ÿå¼€å§‹æ‰§è¡Œäº†ã€‚å­¦ä¹ äº†ä¸€ä¸‹ CI è„šæœ¬çš„è¯­æ³•å’ŒçŸ¥è¯†ï¼Œæœ€ç»ˆè¿è¡Œçš„ç»“æœå¦‚ä¸‹å›¾ï¼š æœ€ç»ˆè¾¾åˆ°äº†æ­å»ºè‡ªå·±çš„è‡ªåŠ¨åŒ– CI çš„ç¯å¢ƒ~ä¹Ÿåˆ©ç”¨äº†å¼€æºå…è´¹çš„ badge æœåŠ¡ ç»™é¡¹ç›®çš„ README å¢åŠ äº†ä¸€ä¸ªæ„å»º CI çŠ¶æ€çš„å¾½ç« ï¼š æ–¹ä¾¿ç›´è§‚åœ¨é¡¹ç›®ä¸»é¡µæŸ¥çœ‹çŠ¶æ€ã€‚ åç»­ ç»è¿‡æ­å»º GitLab å’Œæ­å»º GitLab CI 2 æ­¥ä¹‹åï¼Œä¸‹ä¸€æ­¥æœ‰å¥½å‡ ä¸ªæƒ³è¦åšçš„ä¸œè¥¿ï¼š Git Talk æœåŠ¡ åˆ›å»º Feishu SDK é¡¹ç›®ï¼Œéƒ¨ç½²é£ä¹¦é€šçŸ¥çš„æœåŠ¡ï¼Œå¹¶æ¥å…¥ CIï¼Œå®ç°ä¸»åŠ¨æ¨é€æ„å»ºç»“æœåˆ°é£ä¹¦å®¢æˆ·ç«¯ã€‚ è¿›ä¸€æ­¥é…ç½® Blogï¼Œç›®å‰ Blog å¼„çš„æ¯”è¾ƒä»“ä¿ƒï¼Œå¾ˆå¤šä¿¡æ¯å’Œé…ç½®è¿˜æ²¡åŠ ä¸Šå»ã€‚ ä»Šå¤©å°±å…ˆå†™è¿™ä¹ˆå¤šå§~éš¾å¾—æœ‰æ‘¸é±¼çš„æœºä¼šå¼„è‡ªå·±çš„ä¸œè¥¿ï¼Œå¸Œæœ›è¿˜èƒ½ä¸€ç›´ä¿æŒè¿™ç§çƒ­æƒ…åšä¸‹å»ï¼â˜€ï¸"},{"title":"è¿‘æœŸå¥½ç‰©åˆ†äº«","path":"2020/08/23/è¿‘æœŸå¥½ç‰©åˆ†äº«/","text":"Â¶èƒŒæ™¯ æ¯•ä¸šä¸€å¹´äº†ï¼Œé’±æ²¡æ”’ä¸‹å‡ ä¸ªï¼Œå€’æ˜¯æŠŠä¸€äº›ç§äº†å¾ˆä¹…çš„è‰éƒ½æ‹”äº†ã€‚2 æ¬¡æ¬å®¶è´­è¿›çš„ä¾§é‡ç‚¹ä¸å¤ªä¸€æ ·ï¼Œç¬¬ä¸€æ¬¡æ¯•ä¸šæ¬å®¶ï¼Œå¯¹ç”µå­äº§å“è¿˜æ˜¯å……æ»¡äº†å¥½å¥‡ï¼Œæ›´ä¾§é‡ç”µå­äº§å“ï¼Œç¬¬äºŒæ¬¡åˆ™ç”µå­äº§å“çš„è‰éƒ½æ‹”å®Œäº†ï¼Œæ‰€ä»¥æ›´ä¾§é‡å®¶å±…ç”¨å“ã€‚"},{"title":"æ€ç»´å¯¼å›¾demo","path":"2020/07/26/æ€ç»´å¯¼å›¾demo/","text":"const data = { label: \"Central Topic\", children: [ { label: \"Main Topic 1\", children: [ { label: \"Main Topic 1\" } ] }, { label: \"Main Topic 2\" }, { label: \"Main Topic 3\" } ] } graph TD; A-->B; B-->C; A-->D;"},{"title":"å¦‚ä½•å®ç°å¤åˆ¶Excelå†…å®¹æ›´æ–°æ•°æ®","path":"2020/05/15/å¦‚ä½•å®ç°å¤åˆ¶Excelå†…å®¹æ›´æ–°æ•°æ®/","text":"Â¶èƒŒæ™¯ ä¸Šå­£åº¦åœ¨è¿­ä»£é€šç”¨ç­–ç•¥çš„æ—¶å€™ï¼Œæ›¾ç»å°è¯•è¿ç§» PHP ç‰ˆæœ¬çš„ç­–ç•¥æ•°æ®ä¸Šä¼ åŠŸèƒ½åˆ° Java åå°ï¼Œæœ€åç»“æœæ˜¯é…ç½®ç®¡ç†éƒ¨åˆ†çš„éƒ½å®Œæˆäº†è¿ç§»ï¼ˆæŠ€æœ¯éš¾åº¦è¾ƒä½ï¼‰ï¼Œä½†æ˜¯ç›¸å¯¹è€Œè¨€ï¼Œä¿®æ”¹ä¸‹è½½ä¸‹æ¥çš„ Excel æ•°æ®ï¼Œç„¶åå¤åˆ¶å†…å®¹åˆ°æ–‡æœ¬åŸŸé‡Œå®ç°ä¸Šä¼ æ›´æ–°çš„åŠŸèƒ½å°±å¤æ‚çš„å¤šï¼Œåœ¨ä¸Šæ¬¡çš„è¿ç§»ä¸­ä»¥å¤±è´¥å‘Šç»ˆï¼Œæ²¡æœ‰é¡ºåˆ©è¿ç§»è¿‡æ¥ã€‚ è¿™ä¸ªå­£åº¦éœ€è¦åšçš„éœ€æ±‚â€æ™ºèƒ½è°ƒæ‹¨â€œä¹Ÿæœ‰ç±»ä¼¼çš„æŠ€æœ¯ç‚¹ï¼šéœ€è¦å®ç°æ™ºèƒ½è°ƒæ‹¨æ–¹æ¡ˆçš„ä¸‹è½½æ•°æ®å’Œä¿®æ”¹æ•°æ®ï¼Œç„¶åä¸Šä¼ è¦†ç›–æ›´æ–°ï¼Œè¿˜éœ€è¦è®°å½•æ›´æ–°æ—¥å¿—ã€‚ä¸ä¸€æ ·çš„ä¸šåŠ¡åœºæ™¯ï¼Œç›¸ä¼¼çš„æŠ€æœ¯ç‚¹ï¼Œä¸è¿‡æœ€å¤§çš„ä¸åŒåœ¨äºï¼šè¿™æ¬¡çš„æ–¹æ¡ˆå…¨ç›˜ç”±æˆ‘è‡ªå·±æ¥å†³ç­–ï¼Œéœ€è¦ä»€ä¹ˆå­—æ®µè‡ªå·±åŠ ï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œè‡ªå·±æ„æ€ï¼›è‡ªç”±å‘æŒ¥çš„ç©ºé—´å¾ˆå¤§ã€‚å› æ­¤å¿ƒä¸­å°±å†³å¿ƒè¿™æ¬¡ä¸€å®šè¦æŠŠè¿™ä¸ªåŠŸèƒ½åšå¥½ã€‚ ç­–ç•¥æ›´æ–°çš„ä¿¡æ¯ æ™ºèƒ½è°ƒæ‹¨æ›´æ–°çš„ä¿¡æ¯ Â¶æ„æ€ åœ¨å›å¿†ä¸Šæ¬¡å¼€å‘é€šç”¨ç­–ç•¥çš„ç»éªŒä¸­å’Œå¯¹æœ¬æ¬¡æ™ºèƒ½è°ƒæ‹¨æ–¹æ¡ˆçš„æ‹†è§£çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°†ä¸Šä¼ æ•°æ®æ›´æ–°çš„éš¾ç‚¹æ‹†åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªç‚¹ï¼š Â¶è¡¨æ ¼æ•°æ®çš„æ ¡éªŒ æ•°æ®è¿›å…¥åå°ç¬¬ä¸€æ­¥å°±æ˜¯éœ€è¦å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå…¶å®ä¸ä»…ä»…æ˜¯ä¸Šä¼ æ›´æ–°ï¼Œæ‰€æœ‰çš„æ¥å£éƒ½åº”è¯¥å¯¹å…¥å‚è¿›è¡Œæ ¡éªŒï¼Œåªæ˜¯è¯¥åœºæ™¯ä¸‹â€éç»“æ„åŒ–æ•°æ®â€”â€”Stringâ€œ è½¬æ¢æˆâ€ç»“æ„åŒ–æ•°æ®â€”â€”è¡¨æ ¼â€œæ‰€éœ€è¦è¿›è¡Œçš„æ ¡éªŒç›¸å¯¹æ›´éº»çƒ¦ã€‚æˆ‘è¿™é‡Œå¯¹æ™ºèƒ½è°ƒæ‹¨æ–¹æ¡ˆçš„æ•°æ®æ ¡éªŒåˆ†æˆ2æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼Œè¡¨å¤´çš„éªŒè¯ã€‚éªŒè¯è¡¨æ ¼çš„åˆ—æ•°æ˜¯å¦å’ŒåŸå§‹æ•°æ®ä¸€è‡´ï¼Œé¡ºåºæ˜¯å¦ä¸€è‡´ã€‚è¿™é‡Œä»åº“è¡¨ä¸­æŒ‰ç…§æŒ‡å®šçš„æ’åºï¼ˆä¸€èˆ¬æŒ‰ç…§ id æ’åºï¼Œç­–ç•¥å­—æ®µè¡¨æœ‰ order å­—æ®µï¼Œå¯ä»¥ç”¨è‡ªå®šä¹‰æ’åºé¡ºåºï¼‰å–å‡ºæœŸæœ›çš„åˆ—ä¿¡æ¯ï¼Œå¹¶å­˜å…¥åˆ° ArrayList è¿™ç§æœ‰åºçš„åˆ—è¡¨ä¸­è¿›è¡Œæ¯”å¯¹ã€‚ ç¬¬äºŒæ­¥ï¼Œæ•°æ®è¡Œæ•°çš„éªŒè¯ã€‚æ™ºèƒ½è°ƒæ‹¨æ–¹æ¡ˆå¯¼å…¥éœ€è¦ä¿è¯æ•°æ®è¡Œæ•°å’ŒåŸå§‹æ•°æ®ä¸€è‡´ï¼Œå› æ­¤è¿™é‡ŒæŠŠåŸå§‹è¡¨ä¸­çš„è®°å½•ä¹Ÿå…¨æ•°æŸ¥å‡ºæŒ‰ç…§ç‰¹å®šé¡ºåº(è¿™é‡Œæ˜¯ç”¨çš„å•†å“ ID æ’åº)ï¼Œå¹¶å’Œå…¥å‚é€è¡Œå¯¹æ¯”ç¡®è®¤æ‰€æœ‰çš„è¡Œéƒ½æ˜¯æ­£ç¡®çš„é¡ºåºï¼Œå¹¶ä¸”å’Œä¸Šä¸€æ­¥çš„è¡¨å¤´é•¿åº¦å¯¹æ¯”ï¼Œç¡®è®¤æ¯ä¸€è¡Œéƒ½ä¸ç¼ºæ•°ã€‚é€šç”¨ç­–ç•¥é‚£è¾¹ä¸éœ€è¦ä¿è¯è¡Œæ•°ä¸€è‡´ï¼Œä½†æ˜¯éœ€è¦ä¿è¯æ•°æ®åˆ—ä¸€è‡´ï¼Œå› æ­¤è¿™ä¸€æ­¥ä¹Ÿä¸èƒ½çœç•¥ã€‚ Â¶æ•°æ®é¡¹æ›´æ–°æˆ–æ–°å¢çš„åˆ¤æ–­ æ•°æ®é¡¹æ˜¯æ–°å¢è¿˜æ˜¯æ›´æ–°æ˜¯æ ¹æ®æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è®°å½•å†³å®šçš„ï¼Œæ™ºèƒ½è°ƒæ‹¨è¿™é‡Œæ˜¯æ ¹æ®åŸå§‹æ•°é‡æ˜¯å¦ç­‰äº0ç¡®å®šçš„ï¼Œé€šç”¨ç­–ç•¥æ˜¯é€šè¿‡ç´¢å¼•å­—æ®µæ˜¯å¦ä¸€è‡´ç¡®å®šçš„ã€‚ä¸¤è€…å½¢å¼ä¸åŒï¼Œä½†éƒ½éœ€è¦åšæ›´æ–°/æ–°å¢çš„åˆ¤æ–­ã€‚æ™ºèƒ½è°ƒæ‹¨åˆ¤æ–­çš„é€»è¾‘å¦‚ä¸‹ï¼š updates.forEach(update -> &#123; if (update.getNumFrom() == 0) &#123; // ä»æ— åˆ°æœ‰è¦æ–°å¢è®°å½• itemService.insertDetailRecord(update, planId); &#125; else if (update.getNumTo() == 0) &#123; // ä»æœ‰åˆ°æ— è¦åˆ é™¤è®°å½• itemService.deleteDetailRecord(update, planId); &#125; else &#123; // å¦åˆ™æ›´æ–°è®°å½• itemService.updateDetailRecord(update, planId); &#125; &#125;); éå¸¸ç®€å•çš„å®ç°äº†æ–°å¢/æ›´æ–°åˆ¤æ–­ã€‚ é€šç”¨ç­–ç•¥çš„æ–°å¢/æ›´æ–°åˆ¤æ–­éœ€è¦æ ¹æ®ç´¢å¼•å­—æ®µç¡®è®¤ï¼Œç›®å‰ç´¢å¼•å­—æ®µæ˜¯é€šè¿‡å–æ•°æ®æ‰‹åŠ¨æ‹¼æ¥å®ç°çš„ï¼Œåç»­è®¡åˆ’åœ¨è¡¨ä¸­å†—ä½™è¯¥å­—æ®µæé«˜æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†å¯¹ä¿®æ”¹ç´¢å¼•è€Œä¸éœ€è¦æ¸…ç©ºæ•°æ®ã€‚è¿™é‡Œåˆ¤æ–­æ–°å¢/æ›´æ–°çš„é€»è¾‘å¦‚ä¸‹ï¼š updates.foreach(update -> &#123; if(existIndexes.contains(update.getIndex())) &#123; strategyDataDoMapper.updateData(update, existIndexes.get(update.getIndex()), strategyId); &#125; else &#123; strategyDataDoMapper.insertData(update, strategyId); &#125; &#125;); å®ç°æ–°å¢/æ›´æ–°åˆ¤æ–­åŒæ ·ä¹Ÿä¸å¤æ‚ã€‚ Â¶ç»´åº¦å€¼çš„è½¬æ¢ æ™ºèƒ½è°ƒæ‹¨æ–¹æ¡ˆçš„ç»´åº¦è½¬æ¢è¾ƒä¸ºæœ‰é™ï¼Œä»…ä»…éœ€è¦ä»“åº“ç»´åº¦ï¼Œåœºæ™¯ä¹Ÿä»…é™äºå±•ç¤ºè¡¨å¤´çš„ä»“åº“ä¿¡æ¯å’Œæ—¥å¿—çš„ä»“åº“ä¿¡æ¯ï¼Œä½¿ç”¨åˆ°ç»´åº¦è½¬æ¢åªæœ‰ä¸€ç±»ï¼šXmDimensionUtil.getRemote(&quot;mihome&quot;, mihomeId)ã€‚ä¸è¿‡é€šç”¨ç­–ç•¥åœºæ™¯çš„æ‰€æœ‰å­—æ®µéƒ½æ˜¯é€šè¿‡é…ç½®å®ç°ï¼Œå› æ­¤ç»´åº¦è½¬æ¢çš„åœºæ™¯æ›´å¤šæ ·ï¼Œç»´åº¦è½¬æ¢+æ•°æ®ç»“æ„è½¬æ¢äº¤ç»‡åœ¨ä¸€èµ·ï¼Œé€ æˆäº†ä¸Šä¸€æ¬¡é€šç”¨ç­–ç•¥çš„æ¥å£è¿ç§»æ— æ¯”ç—›è‹¦ï¼Œæ€»æ˜¯è½¬ç€è½¬ç€å°±å¿˜è®°å½“å‰çš„è¿™ä¸ªå­—æ®µåˆ°åº•æ˜¯åç§°è¿˜æ˜¯é”®ï¼Œè¿˜å­˜åœ¨å¾ªç¯è½¬æ¢çš„æ½œåœ¨é£é™©ã€‚ è¿™æ¬¡å®ç°æ™ºèƒ½è°ƒæ‹¨çš„è¿‡ç¨‹å°†è¿™ä¸€éƒ¨åˆ†æ€è·¯æ•´ç†æ¸…æ¥šäº†ï¼ŒåŸåˆ™ä¹Ÿå¾ˆç®€å•ï¼šä¿¡æ¯åªæ‹“å±•ä¸è¦†ç›–ã€‚ç”¨é€šä¿—çš„è¯è¯´å°±æ˜¯ï¼šæŠŠ key å’Œ name éƒ½å­˜èµ·æ¥ï¼Œå°±ä¸å­˜åœ¨è¿·æƒ‘çš„å¯èƒ½äº†ã€‚è¿™ä¸€å¥è¯´èµ·æ¥ç®€å•ï¼Œä½†æ˜¯ç»´åº¦ä¿¡æ¯æ˜¯ç”¨æˆ·é…ç½®ï¼Œå®è·µèµ·æ¥å¯èƒ½ä»æœ‰ä¸€äº›å‘éœ€è¦è¸©ã€‚ Â¶å®ç° è€ƒè™‘å®Œæ‰€æœ‰çš„å‘ä¹‹åï¼Œå®ç°èµ·æ¥å°±æ¯”è¾ƒé¡ºåˆ©äº†ï¼Œä¹Ÿæ¯”è¾ƒå¹¸è¿ï¼Œç”¨äº†å¤§çº¦åŠå¤©ï¼ˆ4-6å°æ—¶ï¼‰ä¸€å£æ°”å®ç°äº†è¿™éƒ¨åˆ†çš„ä»£ç ã€‚è‡ªæˆ‘æ„Ÿè§‰åœ¨æ²¡æœ‰å¤§é‡æ³¨é‡Šçš„æƒ…å†µä¸‹å¯è¯»æ€§è¿˜æ˜¯ä¸é”™çš„~è¿™é‡Œç›´æ¥æŠ›å‡ºæ¥ä¾›å¤§å®¶é­ç­–æŒ‡æ­£ã€‚ Â¶service ä»£ç  public String importTransferPlanDetail(Long planId, String data, Long operator) &#123; TransferPlanDO plan = transferPlanMapper.selectPlanByPlanId(planId); if (plan == null) &#123; throw new CommonException(ErrorCodeEnum.TRANSFER_PLAN_NOT_EXIST); &#125; if (plan.getStatus() != TransferConst.PlanStatus.CREATED) &#123; throw new CommonException(ErrorCodeEnum.TRANSFER_PLAN_NOT_EDITABLE); &#125; TransferPlanDetailBO bo = getTransferPlanDetail(planId); StringBuilder err = new StringBuilder(); try &#123; // éªŒè¯æ•°æ® + è·å–æ•°æ®çš„æ›´æ–°ä¿¡æ¯ List&lt;TransferPlanDetailRecordUpdateBO> updates = getUpdates(data, bo, err); if (err.length() > 0) &#123; return err.toString(); &#125; // æ›´æ–°æ•°æ®åº“è¯¦æƒ…æ•°æ® updates.forEach(update -> &#123; if (update.getNumFrom() == 0) &#123; // ä»æ— åˆ°æœ‰è¦æ–°å¢è®°å½• itemService.insertDetailRecord(update, planId); &#125; else if (update.getNumTo() == 0) &#123; // ä»æœ‰åˆ°æ— è¦åˆ é™¤è®°å½• itemService.deleteDetailRecord(update, planId); &#125; else &#123; // å¦åˆ™æ›´æ–°è®°å½• itemService.updateDetailRecord(update, planId); &#125; &#125;); // æ›´æ–°è°ƒæ‹¨æ–¹æ¡ˆæ›´æ–°æ—¶é—´ transferPlanMapper.updateTime(planId, System.currentTimeMillis() / 1000); // å†™å…¥æ—¥å¿— logService.logImport(operator, planId, updates); &#125; catch (Exception e) &#123; err.append(e.getMessage()); &#125; return err.toString(); &#125; Â¶update å‡½æ•°éƒ¨åˆ† private List&lt;TransferPlanDetailRecordUpdateBO> getUpdates(String data, TransferPlanDetailBO bo, StringBuilder err) &#123; String[] rows = data.split(\"[\\n]+\"); if (rows.length != bo.getDatas().size() + 1) &#123; throw new RuntimeException(\"æ•°æ®è¡Œæ•°é”™è¯¯ï¼éœ€è¦\" + (bo.getDatas().size() + 1) + \"è¡Œã€‚\"); &#125; String[] headers = rows[0].split(\"[\\t]+\"); String[] dataRows = Arrays.copyOfRange(rows, 1, rows.length); PlanDetailHeaderBO[] existHeaders = bo.getHeaders().toArray(new PlanDetailHeaderBO[0]); HashMap&lt;String, Object>[] existDataRows = bo.getDatas().toArray(new HashMap[0]); if (existHeaders.length != headers.length) &#123; throw new RuntimeException(\"è¡¨å¤´åˆ—æ•°é”™è¯¯ï¼éœ€è¦\" + existHeaders.length + \"åˆ—ã€‚\"); &#125; // éªŒè¯è¡¨å¤´ for (int i = 0; i &lt; existDataRows.length; i++) &#123; if (!headers[i].equals(existHeaders[i].getTitle())) &#123; err.append(\"è¡¨å¤´ç¼ºå°‘[\" + existHeaders[i].getTitle() + \"]\\n\"); &#125; &#125; List&lt;TransferPlanDetailRecordUpdateBO> result = new ArrayList&lt;>(); // éªŒè¯æ•°æ® for (int i = 0; i &lt; existDataRows.length; i++) &#123; String[] cells = dataRows[i].split(\"[\\t]+\"); HashMap&lt;String, Object> existRow = existDataRows[i]; String currentGoodsId = String.valueOf(existRow.get(\"goods_id\")); String currentGoodsName = (String) existRow.get(\"goods_name\"); String currentSku = (String) existRow.get(\"sku\"); if (cells.length != existRow.size()) &#123; throw new RuntimeException(\"ç¬¬\" + (i + 1) + \"è¡Œæ•°æ®åˆ—æ•°é”™è¯¯ï¼éœ€è¦\" + existRow.size() + \"åˆ—ã€‚\\n\"); &#125; boolean goodsId = cells[0].equals(currentGoodsId); boolean goodsName = cells[1].equals(currentGoodsName); boolean sku = cells[2].equals(currentSku); if (!goodsId || !goodsName || !sku) &#123; err.append(\"ç¬¬\" + (i + 1) + \"è¡Œæ•°æ®å•†å“ä¿¡æ¯æœ‰è¯¯ï¼Œåº”ä¸º\" + currentGoodsName); &#125; for (int j = 3; j &lt; cells.length; j++) &#123; String currentCellInfo = existHeaders[j].getTitle() + \"è°ƒæ‹¨\" + currentGoodsName; try &#123; // è½¬æ¢æ•°æ® Integer preNum = ((Double) existRow.get(existHeaders[j].getDataIndex())).intValue(); Integer newNum = Integer.parseInt(cells[j]); if (newNum &lt; 0) &#123; err.append(currentCellInfo + \"æ•°æ®æœ‰è¯¯ï¼Œè¯·æ£€æŸ¥ã€‚\\n\"); continue; &#125; if (!preNum.equals(newNum)) &#123; String[] mihomePair = existHeaders[j].getDataIndex().split(\"-\"); String[] mihomeNamepair = existHeaders[j].getTitle().split(\"-\"); result.add(TransferPlanDetailRecordUpdateBO.builder() .goodsId(currentGoodsId) .goodsName(currentGoodsName) .sku(currentSku) .mihomeFrom(mihomePair[0]) .mihomeTo(mihomePair[1]) .mihomeFromName(mihomeNamepair[0]) .mihomeToName(mihomeNamepair[1]) .numFrom(preNum) .numTo(newNum).build()); &#125; &#125; catch (Exception e) &#123; err.append(currentCellInfo + \"æ•°æ®æœ‰è¯¯ï¼Œè¯·æ£€æŸ¥ã€‚\\n\"); &#125; &#125; &#125; return result; &#125; getUpdateséƒ¨åˆ†çš„ä»£ç ä¸€å¼€å§‹å…¶å®æ˜¯å‡†å¤‡æŠŠéªŒè¯å’Œè¯»æ•°åˆ†å¼€åšçš„~å…ˆéªŒè¯æ ¼å¼æ­£ç¡®æ€§ï¼Œå–å‡ºå…¥å‚çš„å­é›†æ•°æ®int[][]ï¼Œå†è¿›è¡Œæ–°å»º/æ›´æ–°åˆ¤æ–­ï¼Œä½†æ˜¯åšçš„è¿‡ç¨‹ä¸­å‘ç°æ²¡æœ‰å¿…è¦ï¼Œå·²ç»éå†åˆ°å…·ä½“çš„æ•°å€¼äº†ï¼Œå¯¹åº”çš„åŸå§‹æ•°å€¼ä¹Ÿæ­£å¥½èƒ½è¯»åˆ°ï¼ˆå·²æœ‰æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯ç”¨ HashMap å­˜å‚¨çš„ï¼Œç”¨dataRow.get([headerName])å°±å¯ä»¥å¾—åˆ°ï¼‰ï¼Œå°±ç›´æ¥å»ç”Ÿæˆå¯¹åº”çš„å˜æ›´è®°å½•åˆ—è¡¨äº†ã€‚ç”±äºè¿èƒŒäº†ä¸€å¼€å§‹çš„è®¾è®¡æ€è·¯ï¼Œæ‰€ä»¥å¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œå¦‚æœä½ æœ‰æ›´ä¼˜é›…çš„å®ç°æ–¹å¼ä¹Ÿå¯ä»¥è·Ÿæˆ‘äº¤æµä¸‹~ Â¶åç»­è¿­ä»£è®¡åˆ’ è¿™é‡Œä½¿ç”¨äº†100è¡Œä¸åˆ°çš„ä»£ç å®ç°äº†å¯¹ä¸Šä¼ æ•°æ®è¡¨æ ¼æ›´æ–°æ•°æ®åº“çš„å…·ä½“æ“ä½œï¼ˆå½“ç„¶è¿˜æœ‰å‰ç½®è¯»å–åŸå§‹æ•°æ®çš„æ­¥éª¤ï¼‰ï¼Œè™½ç„¶ä»£ç ä¸å¤šï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”è¾ƒé”»ç‚¼æ€ç»´èƒ½åŠ›ï¼Œæˆ‘ç¬¬äºŒæ¬¡å¼€å‘æ‰ç®—æ¯”è¾ƒæ»¡æ„çš„å®ç°äº†é¢„æœŸçš„æ•ˆæœï¼Œåç»­è®¡åˆ’å°†å¯¹ä¸Šæ¬¡æœªå®Œæˆçš„é€šç”¨ç­–ç•¥çš„æ•°æ®å¯¼å…¥è¿›è¡Œå¼€å‘ï¼Œè¿›ä¸€æ­¥æé«˜å¯¹è¿™éƒ¨åˆ†æŠ€æœ¯ç‚¹çš„æŒæ¡ã€‚ å¹³å‡¡çš„ä¸šåŠ¡ä¸­ä¹Ÿæœ‰ä¸å¹³å‡¡çš„é—ªå…‰ç‚¹~"},{"title":"å­¦ä»¥è‡´ç”¨","path":"2020/04/30/å­¦ä»¥è‡´ç”¨/","text":"Â¶åˆ·é¢˜ç»å† æœ€è¿‘ä¸€ç›´åœ¨åˆ· Leetcodeï¼Œåˆšå¥½é‡åˆ°ä¸€ä¸ª SQL çš„é¢˜æ¶‰åŠåˆ°æ²¡æœ‰å­¦ä¹ è¿‡çš„çŸ¥è¯†ç‚¹ã€‚è¯¥é¢˜æè¿°å¦‚ä¸‹ï¼š ç»™å®šä¸€ä¸ªæ•°æ®è¡¨ Departmentï¼Œæ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š id revenue month 1 8000 Jan 2 9000 Jan 3 10000 Feb 1 7000 Feb 1 6000 Mar è¦æ±‚è¿”å›çš„æ ¼å¼æ˜¯ä¸Šè¿°æ•°æ®çš„æŒ‰ id å’Œ month è¿›è¡Œèšåˆï¼Œä½†æ˜¯åˆ—åŒæ—¶è¿˜æ˜¯æŒ‰æœˆè¿›è¡Œåˆ‡åˆ†çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¡Œæ–¹å‘æ˜¯æ ¹æ® id åŒºåˆ†çš„ï¼Œåˆ—æ–¹å‘æ˜¯æ ¹æ® month åŒºåˆ†çš„ï¼Œå¦‚ä¸‹è¡¨ï¼š id Jan_Revenue Feb_Revenue Mar_Revenue â€¦ Dec_Revenue 1 8000 7000 6000 â€¦ null 2 9000 null null â€¦ null 3 null 10000 null â€¦ null è¿™ç§ä¸€çœ‹å°±çŸ¥é“ç”¨å¸¸è§„è¯­æ³•å°±æ— æ³•åšåˆ°ï¼Œæ‰€ä»¥å½“æ—¶ç›´æ¥å»æŸ¥äº†ç­”æ¡ˆï¼Œç­”æ¡ˆä¹Ÿå¾ˆç®€å•ï¼š select id, SUM(CASE WHEN month='Jan' then revenue else null end) as 'Jan_Revenue', SUM(CASE WHEN month='Feb' then revenue else null end) as 'Feb_Revenue', SUM(CASE WHEN month='Mar' then revenue else null end) as 'Mar_Revenue', SUM(CASE WHEN month='Apr' then revenue else null end) as 'Apr_Revenue', SUM(CASE WHEN month='May' then revenue else null end) as 'May_Revenue', SUM(CASE WHEN month='Jun' then revenue else null end) as 'Jun_Revenue', SUM(CASE WHEN month='Jul' then revenue else null end) as 'Jul_Revenue', SUM(CASE WHEN month='Aug' then revenue else null end) as 'Aug_Revenue', SUM(CASE WHEN month='Sep' then revenue else null end) as 'Sep_Revenue', SUM(CASE WHEN month='Oct' then revenue else null end) as 'Oct_Revenue', SUM(CASE WHEN month='Nov' then revenue else null end) as 'Nov_Revenue', SUM(CASE WHEN month='Dec' then revenue else null end) as 'Dec_Revenue' from Department group by id order by id; å…¶ä¸­é‡ç‚¹éƒ¨åˆ†å°±æ˜¯ SUM(CASE WHEN XX THEN XX else XX END)ï¼Œå…¶ä¸­çš„ WHEN å’Œ THEN æ—¢å¯ä»¥æ˜¯å­—æ®µä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ä¹Ÿå¯ä»¥æ˜¯ç®€å•çš„å€¼ï¼Œå¾ˆç®€å•ï¼Œè¯­æ³•å°±èƒ½çœ‹æ‡‚åœ¨åšä»€ä¹ˆï¼Œä¸å¤šè§£é‡Šäº†ã€‚ Â¶åšå®Œæ€è€ƒ ç”±äºé¢˜ç›®çš„è§£æ³•æ˜¯ç½‘ä¸Šç›´æ¥æœçš„ç­”æ¡ˆï¼Œå½“æ—¶å°±åœ¨æƒ³ï¼ŒSQL é¢˜ç›®çš„è€ƒå¯Ÿç‚¹éƒ½æ˜¯åå‘æ²¡è§è¿‡çš„è¯­æ³•ï¼Œéƒ½åªèƒ½ç›´æ¥æŸ¥ç»“æœï¼Œå¾—ä¸åˆ°ç»ƒä¹ æ€ç»´çš„æ•ˆæœäº†ï¼Œä¸€åº¦æƒ³è¦æŠŠ SQL é¢˜è¿‡æ»¤æ‰ã€‚æœ€åè¿˜æ˜¯å†³å®šç•™ä¸‹ï¼Œæ¯æ¬¡é‡åˆ° SQL é¢˜å°±ç›´æ¥æœç»“æœå­¦ä¹ ä¸‹ï¼Œå¹¶ä¸”å¤šåšä¸€é“ç¨‹åºé¢˜æ¥å¼¥è¡¥ã€‚æŠŠ SQL çš„é¢˜å½“åšå­¦ä¹ ã€‚ Â¶ğŸ¤Ÿ ğŸ‘‰ ğŸ ğŸ« æ­£å¦‚ã€Šé˜¿ç”˜æ­£ä¼ ã€‹é‡Œè¯´çš„é‚£æ ·ï¼šâ€Life is like a box of chocolate, you never konw what youâ€™ll gonna getâ€œã€‚æˆ‘ä¹Ÿæ²¡æƒ³åˆ°è¿™ç§ä¸å¸¸ç”¨çš„ SQL è¿˜ä¼šæœ‰æ’ä¸Šç”¨åœºçš„æ—¶å€™ã€‚ åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šç°åœ¨æä¾›ä¸€ä¸ªæ¥å£ï¼Œå®ç°çš„æ˜¯è‡ªåŠ¨ç”Ÿæˆè°ƒæ‹¨æ–¹æ¡ˆï¼Œå­˜åœ¨è¡¨ä¸­çš„ç»“æ„æ˜¯ç”±æ–¹æ¡ˆIDã€å•†å“IDã€å‘è´§ä»“åº“ã€æ”¶è´§ä»“åº“å››ä¸ªå­—æ®µå”¯ä¸€ç¡®å®šçš„ä¸€æ¡è®°å½•ï¼Œå­—æ®µè¿˜åŒ…æ‹¬å½“å‰å•†å“çš„åç§°ã€å½“å‰å•†å“çš„è°ƒæ‹¨æ•°é‡ç­‰ä¿¡æ¯ã€‚å¦‚ä¸‹è¡¨ï¼š id plan_id goods_id goods_name from to number 1 31029 A123 å°ç±³10 Pro 31024 31028 20 ä¸Šè¿°çš„ä¸€æ¡è®°å½•è¡¨ç¤ºçš„æ˜¯ï¼šåˆ›å»ºçš„è‡ªåŠ¨è°ƒæ‹¨æ–¹æ¡ˆ 31029 ä¸­æœ‰ä¸€æ¡è°ƒæ‹¨è®°å½•ï¼Œéœ€è¦å°† 20 åªå°ç±³ 10 Proæ‰‹æœº(ID: A123)ä» 31024 ä»“åº“è°ƒæ‹¨åˆ° 31028 ä»“åº“ã€‚ ç°åœ¨éœ€è¦æä¾›ä¸€ä¸ªç•Œé¢ï¼Œä¾›ç”¨æˆ·æŸ¥è¯¢ä¸€ä¸ªè°ƒæ‹¨æ–¹æ¡ˆçš„è¯¦è¡¨ï¼Œå…¶ä¸­æ¯ä¸€è¡Œä»£è¡¨äº†ä¸€ç§å•†å“ï¼Œä¸€åˆ—æ•°æ®ä»£è¡¨äº†ä¸€ä¸ª[å‘è´§ä»“]-[æ”¶è´§ä»“]çš„å¯¹åº”å…³ç³»ï¼Œå¦‚æœè¯¥å•†å“åœ¨è¿™ä¸ªè°ƒæ‹¨å…³ç³»ä¸Šæ²¡æœ‰æ•°æ®åˆ™ç•™ç©ºã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾ï¼ˆæ¥è‡ªäºç³»ç»ŸåŸå‹å›¾ï¼‰ï¼š ä¸€å¼€å§‹è€ƒè™‘çš„æŠ€æœ¯æ–¹æ¡ˆæ˜¯ï¼Œå°†è¡¨ä¸­å¯¹åº”çš„æ‰€æœ‰æ•°æ®é¡¹éƒ½æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åé€šè¿‡ç¨‹åºå»åšæ•°æ®çš„èšåˆï¼Œæ•´ç†å‡ºæ¥çš„æ€è·¯å¦‚ä¸‹ï¼š æ˜¾ç¤ºè°ƒæ‹¨æ–¹æ¡ˆè¯¦æƒ…ï¼š - æŸ¥è¯¢å¾—åˆ°List&lt;Item&gt; items - æ‰€æœ‰çš„ MihomeFrom-MihomeTo pair åšæˆ HashSet - ç”Ÿæˆ Headers - Sku è¿‡æ»¤æˆ HashSet sku - foreach sku in skus - - foreach item in items.filter(sku) - - data.add(item.mihomeFrom-item.mihomeTo, item.number) å¯¼å‡ºæŠ¥è¡¨ï¼šä½¿ç”¨æ˜¾ç¤ºè¯¦æƒ…çš„æ¥å£ï¼Œå¹¶å°† header+data çš„ç»“æœè½¬æ¢æˆ csv - headerè½¬æ¢æˆ ArrayList - data ä¹Ÿè½¬æ¢æˆåŒå¤§å°çš„ ArrayListï¼Œå¹¶ search åˆ°å¯¹åº”çš„å€¼ åæ¥å›å¿†èµ·åšè¿‡çš„åšè¿‡çš„ LeetCode é¢˜ç›®ï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¸Šè¡¨ä¸­çš„æ¯ä¸€è¡Œè®°å½•å¯¹åº”äº†åŸå‹å›¾ä¸­çš„è¡¨æ ¼çš„æ¯ä¸€ä¸ªæ ¼ç‚¹ï¼Œè¿™ä¸ªä¸šåŠ¡åœºæ™¯å°±å®Œç¾å¥‘åˆäº†ä¸Šé¢é¢˜ç›®çš„è€ƒå¯Ÿç‚¹ï¼šå¯¹åŸå§‹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œç‰¹å®šæƒ…å†µçš„èšåˆï¼Œç”Ÿæˆæ–°çš„æ•°æ®åˆ—ã€‚ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¾‹é¢˜ä¸­çš„æ•°æ®åˆ—æ˜¯ç»™å®šçš„12ä¸ªæœˆï¼Œè€Œå½“å‰çš„ä¸šåŠ¡éœ€è¦æ ¹æ®æ•°æ®çš„ç‰¹ç‚¹åŠ¨æ€ç”Ÿæˆã€‚è¿™ä¸€éš¾ç‚¹åœ¨Mybatisä¸­ä¹Ÿæ¯”è¾ƒå¥½è§£å†³ï¼šMapper.xml ä½œä¸ºDALå±‚è®¿é—®æ•°æ®åº“çš„ä»£ç†ï¼Œæ—¢å¯ä»¥ä¼ å…¥å‚æ•°ï¼Œä¹Ÿæ”¯æŒä¸€äº›ç®€å•çš„é€»è¾‘æ“ä½œæŒ‡ä»¤ï¼Œæ¯”å¦‚forå¾ªç¯æ’å…¥SUMå‡½æ•°å°±å¯ä»¥å®ç°ç”ŸæˆåŠ¨æ€åˆ—çš„æ•ˆæœã€‚ Â¶è§£å†³æ–¹æ¡ˆ Â¶1. æŸ¥è¯¢å‡ºæ‰€éœ€çš„æ‰€æœ‰åŠ¨æ€åˆ—æ•°æ® SQLï¼š select mihome_from, mihome_to from plan_test as l where l.plan_id = 1; ç»“æœé›†ï¼š mihome_from mihome_to 1 10 1 12 2 10 3 14 å°†ä¸Šè¿°ç»“æœç”¨ä¸€ä¸ªæ•°æ®ç»“æ„ List&lt;MihomePair&gt; ä¿å­˜èµ·æ¥ï¼Œåœ¨ä¸‹ä¸€æ­¥ä¸­ä½¿ç”¨ã€‚ Â¶2. åŠ¨æ€æ„å»º SQL mapper.xml: &lt;select id=\"selectDetailTable\" resultType=\"java.util.HashMap\"> select sku, goods_id,goods_name, &lt;foreach collection=\"mihomePair\" index=\"index\" item=\"pair\" separator=\",\"> SUM(CASE WHEN mihome_from=#&#123;pair.from&#125; and mihome_to = #&#123;pair_to&#125; then number else null end) as '#&#123;pair.from&#125;-#&#123;pair_to&#125;' &lt;/foreach> from plan_test where plan_id = 1 group by sku,goods_id, goods_name &lt;/select> SQL æ‰§è¡Œç»“æœï¼š Â¶è¾“å‡ºç»“æœ ç»“æœé›†HashMapä¸­çš„KeySetè‡ªèº«å¯ä»¥ä½œä¸ºè¡¨å¤´ï¼Œç¨è½¬æ¢ä¸‹å³å¯è¿”å›ï¼Œæ•°æ®é¡¹éƒ½ç¬¦åˆå‰ç«¯éœ€è¦çš„æ ¼å¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿”å›ã€‚ è¯¥ç»“æœå¯ä»¥è¿›ä¸€æ­¥è½¬æ¢æˆ SKU ä½œä¸ºé”®çš„ Listï¼Œä¾›ç”¨æˆ·çš„æ›´æ–°æ“ä½œæ–¹ä¾¿æ“ä½œåŸå§‹æ•°æ®ã€‚ä¹Ÿå¯ä»¥å°† KeySet è½¬æ¢ä¸º Listï¼Œæ•°æ®åˆ—ä» Map è½¬æ¢æˆæ•°ç»„ï¼Œæ–¹ä¾¿å¯¼å‡º CSV æ ¼å¼çš„æ–‡ä»¶ã€‚ Â¶é¡¹ç›®å®è·µ åœ¨æ™ºèƒ½è°ƒæ‹¨é¡¹ç›®ä¸­å°†è¿™ä¸ªæŠ€æœ¯ç‚¹åº”ç”¨åˆ°å®è·µä¸­ï¼Œæœ€ç»ˆå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š ** è¯·æ±‚å“åº” json ** ** ç”¨æˆ·ç•Œé¢ ** Â¶æ€è€ƒ è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†æ˜¯å¯ä»¥åæ˜ å‡ºä¸€äº›æœ‰æ„æ€çš„è§‚ç‚¹ï¼šâ€ä¸–ç•Œä¸Šæ²¡æœ‰é”™è¯¯çš„é“è·¯ï¼Œä»–ä»¬æœ€ç»ˆéƒ½èµ°å‘æ­£ç¡®â€œã€‚ä¸è¦æ”¾å¼ƒå¹³æ—¶çš„ç§¯ç´¯ï¼Œä¹Ÿè®¸ä»–ä»¬ä¼šåœ¨æ„æƒ³ä¸åˆ°çš„æ—¶å€™ç»™ä½ ä¸€ä¸ªbonus~"},{"title":"åˆ›å»ºhexoè„šæœ¬","path":"2020/01/06/åˆ›å»ºhexoè„šæœ¬/","text":"èµ·å›  æœ¬äººåˆ›å»ºHexoè„šæœ¬çš„ç—›ç‚¹ä¸»è¦æ˜¯2ç‚¹ï¼š æˆ‘ç”¨ vs code çš„ç»ˆç«¯è¿è¡Œ hexo å‘½ä»¤å’Œç®¡ç†èµ„æºæ–‡ä»¶ï¼Œç”¨ Typora æ’°å†™æ–‡ç« ï¼Œå› æ­¤æ¯æ¬¡ä¸ç®¡æ˜¯æ–°å»ºæ–‡ç« è¿˜æ˜¯é¢„è§ˆè¿˜æ˜¯å‘å¸ƒéƒ½éœ€è¦æ¥å›åˆ‡æ¢ï¼Œæ­¥éª¤è¾ƒå¤šæŒºéº»çƒ¦çš„ã€‚ åšå®¢æºç çš„ç‰ˆæœ¬ç®¡ç†ã€‚ä¹‹å‰å†™è¿‡å¥½å‡ ç¯‡åšæ–‡ï¼Œå¯æ˜¯åœ¨ä¸€æ¬¡è£…æœºçš„è¿‡ç¨‹ä¸­å¿˜è®°è¿ç§»ï¼Œç»“æœä¸¢å¤±äº†åŸå§‹markdownçš„æ–‡ç« å’Œé…ç½®æ–‡ä»¶ï¼Œå¯¼è‡´æ— æ³•ç»§ç»­å†™ä¸‹å»äº†ï¼Œåªå¾—é‡å¤´å¼€å§‹!QAQ è„šæœ¬ åŸºäºä»¥ä¸Š2ä¸ªåŸå› ï¼Œè¿™é‡Œæˆ‘åˆ›å»ºäº†3ä¸ªç›¸å…³çš„è„šæœ¬ï¼Œè¿˜æœ‰ä¸€ä¸ªéº»çƒ¦ä¸€ç‚¹æ­£åœ¨å®ç°ä¸­~ Â¶1. æ–°å»ºæ–‡ç«  cd ~/repos/blog-src hexo new \"&#123;query&#125;\" open source/_posts/&#123;query&#125;.md æ ¸å¿ƒæ˜¯hexo new xxå‘½ä»¤ï¼Œåˆ›å»ºäº†æ–°mdæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨openå‘½ä»¤ä½¿ç”¨é»˜è®¤æ–¹å¼ï¼ˆæˆ‘è®¾ç½®çš„æ˜¯Typoraï¼‰æ‰“å¼€è¯¥æ–‡ä»¶å¼€å§‹å†™æ–‡ç« ã€‚ Â¶2. æœ¬åœ°è¿è¡Œåšå®¢ cd ~/repos/blog-src hexo clean hexo generate hexo server -p &#123;query&#125; open https://localhost:&#123;query&#125; æœ‰ç‚¹åƒgitçš„æäº¤å’Œæœ¬åœ°è¿è¡Œï¼Œå°±æ˜¯ç”¨hexoçš„serveræœ¬åœ°è¿è¡Œå‘½ä»¤,è¿è¡Œå¯åŠ¨åéœ€è¦æ‰“å¼€æµè§ˆå™¨è®¿é—®æœ¬åœ°åœ°å€ã€‚ç”±äºhexo serveræŠŠå½“å‰çš„ç»ˆç«¯æŒ‚èµ·äº†ï¼Œå› æ­¤éœ€è¦å°†è®¿é—®é¡µé¢çš„å‘½ä»¤æ¢ä¸ªåœ°æ–¹å¯åŠ¨ï¼Œè¿™é‡Œç›´æ¥æŠŠå¯åŠ¨Chromeï¼Œè®¿é—®localhost:{query}çš„æ“ä½œæ”¾åœ¨è¾“å…¥ä¹‹åï¼Œè™½ç„¶ä¼šæš‚æ—¶æ˜¾ç¤ºæ— æ³•è®¿é—®ï¼Œä½†æ˜¯ç”±äºChromeå¼€å¯äº†è‡ªåŠ¨é‡è½½ç‰¹æ€§ï¼Œæ‰€ä»¥èµ·èµ·æ¥åè¿˜æ˜¯èƒ½æ˜¾ç¤ºåšå®¢ï¼Œå°±æš‚å…ˆè¿™ä¹ˆå®ç°äº†ã€‚ Â¶3. å‘å¸ƒåšå®¢ cd ~/repos/blog-src git add . git commit -m \"update\" git push hexo g hexo d å‘å¸ƒåšå®¢éœ€è¦å…ˆæŠŠé¡¹ç›®çš„æºç æ¨åˆ° github ä¸Šå†æ‰§è¡Œéƒ¨ç½²ï¼Œä¿è¯äº†æºç å’Œåšå®¢éƒ½å¾—åˆ°åŒæ­¥ã€‚ Â¶4. ç¼–è¾‘åšå®¢ åœ¨å®Œæˆä¸Šè¿°å‡ ä¸ªè„šæœ¬åè¿›ä¸€æ­¥ï¼Œéœ€è¦å®ç°ä¸€ä¸ªå¯¹å½“å‰å·²æœ‰åšæ–‡çš„ç¼–è¾‘åŠŸèƒ½ï¼Œç›®æ ‡æ˜¯å®ç°åˆ—å‡ºå½“å‰æ‰€æœ‰åšæ–‡å¹¶é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ‰“å¼€ç¼–è¾‘ã€‚ å‚è€ƒäº†ä¸€äº›åˆ«äººå†™çš„ python çš„ workflowï¼Œå®ç°äº†ç®€å•çš„è·å–æ‰€æœ‰åšæ–‡å¹¶åˆ—å‡ºçš„åŠŸèƒ½ï¼š from os import listdir from os.path import isfile, join import sys from workflow import Workflow3, ICON_INFO reload(sys) sys.setdefaultencoding('utf-8') log = None mypath = '/Users/haoxingxiao/repos/blog-src/source/_posts' def main(wf): # åˆ—å‡ºæ‰€æœ‰ markdown æ–‡ä»¶ md_files = [f for f in listdir(mypath) if isfile(join(mypath, f)) and f.endswith('.md')] # å±•ç¤ºåœ¨ workflow çš„ä¸‹æ‹‰åˆ—è¡¨ä¸­ï¼Œarg è¡¨ç¤ºè¾“å‡ºç»™åç»­æµç¨‹çš„å‚æ•°å­—ç¬¦ä¸² for file in md_files : wf.add_item( file, mypath+ '/' +file, valid=True, icon=ICON_INFO, arg=mypath+ '/' + file ) wf.send_feedback() if __name__ == u\"__main__\": wf = Workflow3() log = wf.logger sys.exit(wf.run(main)) åç»­å†è¿½åŠ ä¸Šä¸€ä¸ª Run ScriptæŠŠ{query}ä¼ é€’è¿›å»æ‰“å¼€è¯¥æ–‡ä»¶å³å¯ã€‚ æ•ˆæœï¼š Â¶base64 ç¼–ç è§£ç  å®Œæˆä¸Šè¿°çš„å‡ ä¸ª workflow åï¼Œç»§ç»­ä¸€é¼“ä½œæ°”å®Œæˆäº† base64 ç¼–ç è§£ç çš„ workflowã€‚è¿˜å¢åŠ äº†æ–°çš„ç‰¹æ€§ï¼šfilterï¼Œé€šè¿‡ Notification æç¤ºç”¨æˆ·è½¬æ¢æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚ è¿˜æ˜¯ç”¨ python çš„åº“æ‰§è¡Œæ ¸å¿ƒçš„è½¬æ¢ï¼š import sys import base64 query = \"&#123;query&#125;\" sys.stdout.write(base64.b64decode(query)) ä»£ç å¾ˆç®€å•ï¼Œè¿™éƒ¨åˆ†æµç¨‹æ§åˆ¶æ›´é‡è¦ï¼Œå¦‚ä¸‹å›¾ï¼š workflow æµç¨‹å›¾ï¼š åœ¨æ‰§è¡Œå®Œç¼–ç å’Œè§£ç åï¼Œæ ¹æ®å†…å®¹æ˜¯å¦ä¸ºç©ºåˆ¤æ–­æ˜¯å¦æˆåŠŸï¼Œå¹¶ä½¿ç”¨ Notification æç¤ºç”¨æˆ·ç»“æœ~æˆåŠŸäº†è¿˜ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸­ã€‚ Â¶æ€»ç»“ ä½¿ç”¨ alfred å®ç°äº†åšå®¢æ–‡ç« çš„æ–°å¢ã€ç¼–è¾‘ã€æœ¬åœ°è¿è¡Œå’Œå‘å¸ƒå‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œå¯¹è‡ªå·±æ—¥å¸¸ä½¿ç”¨ä¹Ÿéå¸¸æœ‰æ„ä¹‰ï¼Œè€Œä¸”å¯¹ç†Ÿæ‚‰ workflow åº“çš„è¯­æ³•ä¹Ÿæœ‰å¸®åŠ©ï¼Œåç»­å¯ä»¥è¿›ä¸€æ­¥è€ƒè™‘æŠŠå¸¸ç”¨çš„ä¸€äº›å·¥ä½œæµä¼˜åŒ–åˆ° workflow~ e.p.: base64 çš„è½¬æ¢(Done)"},{"title":"è§„åˆ™é…ç½®å¹³å°","path":"2020/01/05/è§„åˆ™é…ç½®å¹³å°/","text":"Â¶1 ä¸šåŠ¡èƒŒæ™¯ Â¶1.1 æ˜¯ä»€ä¹ˆæ ·çš„ä¸šåŠ¡åœºæ™¯ å½“å‰ä¸šåŠ¡åœºæ™¯ä¸­å­˜åœ¨è¿™æ ·çš„ä¸€ç§è¾ƒä¸ºç‰¹æ®Šçš„éœ€æ±‚ï¼šè®¢å•æµçš„å¤„ç†è¿‡ç¨‹ä¸­ï¼ŒåŒ…æ‹¬äº†ä¸€äº›å†³ç­–çš„èŠ‚ç‚¹ã€‚å¦‚ï¼šæ‹†å•ã€åˆå•ã€åˆ†å¿«é€’ç­‰ã€‚è¿™äº›åœºæ™¯å­˜åœ¨å…±åŒç‚¹ï¼š è§„åˆ™æ•°é‡ç›¸å¯¹å¤šï¼Œç”¨å•çº¯çš„åˆ†æ”¯ä»£ç é€»è¾‘å®ç°èµ·æ¥éº»çƒ¦ä¸”ä¸ä¼˜é›… è§„åˆ™éšæ—¶å¯èƒ½ä¼šè°ƒæ•´ï¼Œå¦‚æœç”¨ç¡¬ç¼–ç å®ç°åˆ™è°ƒæ•´å‘¨æœŸé•¿ï¼Œä¸èƒ½æ»¡è¶³ä¸šåŠ¡åœºæ™¯çš„è¦æ±‚ï¼›æ­¤å¤–ï¼Œç¡¬ç¼–ç å¯¼è‡´æ¯æ¬¡è°ƒæ•´éƒ½éœ€è¦å¼€å‘çš„æ”¯æŒï¼ŒåŠ é‡äº†å¼€å‘çš„è´Ÿæ‹…ã€‚ è§„åˆ™çš„è¾“å…¥è¾“å‡ºç›¸å¯¹å›ºå®šï¼šè¾“å…¥ä¸€äº›å­—æ®µçš„å€¼ï¼Œè¾“å‡ºä¸€äº›å›ºå®šå€¼çš„ç»“æœã€‚ä¸ç”¨çš„åœºæ™¯é€‚åˆç”¨åŒä¸€å¥—ç³»ç»Ÿå»ç»´æŠ¤ã€‚ æ­¤å‰ PHP ç‰ˆæœ¬çš„ç³»ç»Ÿä¸­å®ç°äº†ä¸€å¥—è¾ƒä¸ºç®€å•çš„è§„åˆ™é…ç½®ç³»ç»Ÿï¼Œä½†æ˜¯å…¶ä¸ç®¡æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œéƒ½æ˜¯ç›´æ¥ä¸¢ç»™ç”¨æˆ·ä¸€ä¸ªè¾“å…¥æ¡†ç›´æ¥è¾“å…¥å…¨æ–‡ï¼Œç”¨æˆ·é¢å¯¹è¿™æ ·çš„ä¸€ä¸ªç©ºç™½é¡µé¢å…¶å®æ ¹æœ¬ä¸çŸ¥é“å¡«å†™ä»€ä¹ˆã€‚ å› æ­¤ï¼Œè¿™ç‰ˆçš„ Java æ–°ç³»ç»Ÿéœ€æ±‚æ˜¯éœ€è¦å®ç°ä¸€ä¸ªæ›´æ˜“ç”¨ã€æ‹“å±•æ€§æ›´å¼ºçš„ä¸€ä¸ªè§„åˆ™é…ç½®ä¸­å¿ƒã€‚æš‚æ—¶ç»™çš„åœºæ™¯æ˜¯è§„åˆ™æ•°é‡è¾ƒå°‘çš„åˆå•è§„åˆ™â€”â€”å½“å‰ä»…æœ‰3æ¡æ˜ç¡®çš„åˆå•è§„åˆ™ï¼Œéœ€è¦å…ˆå°†è¿™äº›è§„åˆ™æ­£ç¡®é…ç½®åˆ°ç³»ç»Ÿä¸­ã€‚ Â¶1.2 åˆè¯† Drools æœ¬æ¥è®¡åˆ’è‡ªè¡Œå®ç°ä¸€ä¸ªè¾ƒä¸ºå›ºå®šé€»è¾‘çš„å­—æ®µè¯»å–ã€å­—æ®µå†™å…¥çš„ä¸€å¥—å¯¹è±¡å¤„ç†æµç¨‹ï¼š // precode for params RuleResult result = RuleParser.parse(ruleParams); // postcode for result ç°åœ¨æƒ³æƒ³å°±èƒ½å‘ç°è¿™ç§è®¾è®¡æ€è·¯å­˜åœ¨ä¸€äº›æœªè€ƒè™‘åˆ°çš„é—®é¢˜ï¼š æ‹“å±•æ€§æå·®ï¼›è¯¥éƒ¨åˆ†çš„é…ç½®å®Œå…¨ä¾èµ–äºå½“æ—¶çš„ä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ï¼Œå¦‚æœå‡ºç°äº†æ–°çš„éœ€æ±‚ï¼Œå¦‚éœ€è¦è°ƒæ•´åç»­çš„ç¨‹åºç»“æ„ï¼Œåˆ™åªèƒ½é€šè¿‡è°ƒæ•´postä»£ç å®ç°ï¼Œè™½ç„¶è¿™æ ·ä¹Ÿèƒ½æ»¡è¶³å½“åœºçš„éœ€æ±‚ï¼Œä½†å¯¹äºåç»­æ–°éœ€æ±‚çš„æ”¯æŒèƒ½åŠ›ä¸è¶³ï¼Œç»´æŠ¤èµ·æ¥ä»ç„¶è¾ƒä¸ºåƒåŠ›ã€‚ è§„åˆ™åŒ¹é…éƒ¨åˆ†çš„ç®—å­è®¾è®¡ï¼›è¯¥éƒ¨åˆ†çš„ä»£ç å¯èƒ½èƒ½å®ç°ï¼Œä½†æ˜¯éœ€è¦è€—è´¹ä¸€å®šæ—¶é—´è®¾è®¡+å®ç°+è°ƒè¯•ã€‚è€Œä¸”è¿™éƒ¨åˆ†çš„å®ç°å®é™…ä¸Šå±äºåº•å±‚æ”¯æŒï¼Œå¼€å‘ç³»ç»Ÿåº”è¯¥ç§‰æŒçš„åŸåˆ™åº”è¯¥æ˜¯ï¼šèƒ½ç”¨ç°æˆçš„å·¥å…·å°±ä¸è¦è‡ªå·±å‘æ˜è½®å­ã€‚å› æ­¤ï¼Œè¿™éƒ¨åˆ†ä»£ç å±å®ä¸å¿…è¦ã€‚ å¶ç„¶çš„æœºä¼šï¼Œè·Ÿå°çˆ±éƒ¨é—¨çš„å°åº·åŒå­¦èŠäº†èŠï¼Œä»–ç»™æˆ‘è¯´ä»–ä»¬éƒ¨é—¨åˆšå¥½éœ€è¦è°ƒç ”ä¸€ä¸ªå¼€æºå·¥å…·ï¼šDroolsè§„åˆ™å¼•æ“ã€‚ä»è€Œæ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚ Â¶2 æŠ€æœ¯åŸç† Â¶2.1ä»€ä¹ˆæ˜¯è§„åˆ™å¼•æ“ è§„åˆ™å¼•æ“æ˜¯åŸºäºè§„åˆ™çš„ä¸“å®¶ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šè§„åˆ™åº“(Knowledge base)+Working Memory(Fact base)+æ¨ç†æœº(è§„åˆ™å¼•æ“)ï¼Œè§„åˆ™å¼•æ“æ ¹æ®æ—¢å®šäº‹å®å’ŒçŸ¥è¯†åº“æŒ‰ç…§ä¸€å®šçš„ç®—æ³•æ‰§è¡Œæ¨ç†é€»è¾‘å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚ï¼ˆDroolsä¸­æ–‡ç½‘ï¼‰ Â¶2.2 Drools Drools æ˜¯ä¸€ä¸ªåŸºäºCharles Forgyâ€™sçš„RETEç®—æ³•çš„ï¼Œæ˜“äºè®¿é—®ä¼ä¸šç­–ç•¥ã€æ˜“äºè°ƒæ•´ä»¥åŠæ˜“äºç®¡ç†çš„å¼€æºä¸šåŠ¡è§„åˆ™å¼•æ“ï¼Œç¬¦åˆä¸šå†…æ ‡å‡†ï¼Œé€Ÿåº¦å¿«ã€æ•ˆç‡é«˜ã€‚ ä¸šåŠ¡åˆ†æå¸ˆäººå‘˜æˆ–å®¡æ ¸äººå‘˜å¯ä»¥åˆ©ç”¨å®ƒè½»æ¾æŸ¥çœ‹ä¸šåŠ¡è§„åˆ™ï¼Œä»è€Œæ£€éªŒæ˜¯å¦å·²ç¼–ç çš„è§„åˆ™æ‰§è¡Œäº†æ‰€éœ€çš„ä¸šåŠ¡è§„åˆ™ã€‚ï¼ˆè¿˜æ˜¯Droolsä¸­æ–‡ç½‘ï¼‰ Â¶2.3 Droolsç‰¹ç‚¹ æ”¯æŒDSLè¯­æ³•ã€XMLè¯­æ³•å®šä¹‰è§„åˆ™ã€‚ é‡‡ç”¨RETEç®—æ³• å¼€æºäº§å“ JBossäº§å“ï¼Œæˆç†Ÿåº¦é«˜ Â¶2.4 å°±å†³å®šæ˜¯ä½ äº† ä¸ç®¡æ˜¯ä»æŠ€æœ¯æ ˆï¼ˆJavaï¼‰è¿˜æ˜¯ä»äº§å“çš„åŠŸèƒ½ä¸Šæ¥çœ‹ï¼ŒDroolsè§„åˆ™å¼•æ“éƒ½å®Œç¾ç¬¦åˆæˆ‘ä»¬å½“å‰çš„ä¸šåŠ¡åœºæ™¯çš„éœ€è¦ï¼Œè€Œåæˆ‘ä»¬åˆè°ƒç ”äº†å®ƒçš„ç®—å­æ”¯æŒã€ç»“æœè¯­å¥çš„æ”¯æŒã€åŠ¨æ€åŠ è½½çš„å®ç°ç­‰å¤šä¸ªæ–¹é¢çš„ç‰¹æ€§ï¼Œæœ€ç»ˆæ•²å®šé‡‡ç”¨è¯¥æ–¹æ¡ˆå®ç°æˆ‘ä»¬çš„è§„åˆ™é…ç½®ä¸­å¿ƒã€‚ Â¶3 è§„åˆ™è¯­æ³•ä»‹ç» Droolsé‡‡ç”¨ç‰¹æ®Šçš„DSLè¯­æ³•å®šä¹‰è§„åˆ™ï¼Œå› æ­¤éœ€è¦å…ˆç†Ÿæ‚‰è¯¥éƒ¨åˆ†çš„è¯­æ³•ã€‚ package com.sample.drools.rule import java.util.Map; function isZero(val) &#123; return val == 0; &#125; rule \"name\" no-loop true when $message:Message(status == 0) then System.out.println(\"fit\"); $message.setStatus(1); update($message); end importsï¼šè™½ç„¶æ˜¯DSLï¼Œä½†æ˜¯å…¶åŸºäºJavaè¯­æ³•ï¼Œå› æ­¤åŒæ ·éœ€è¦ç”¨ Java çš„ import è¯­å¥å®ç°ç±»çš„å¼•ç”¨ã€‚ functionsï¼šå¯ä»¥å®ç°ä¸€äº›è‡ªå®šä¹‰å‡½æ•°ï¼Œç”¨åœ¨å…·ä½“çš„è§„åˆ™ä¸­ã€‚ç”±äºä½¿ç”¨ DSL è¯­æ³•ï¼Œåœ¨é…ç½®ä¸­å¿ƒéš¾ä»¥å®ç°è¯¥éƒ¨åˆ†ä»£ç æ ¡éªŒï¼Œå› æ­¤æš‚ä¸å®ç°è¯¥éƒ¨åˆ†ã€‚ rulesï¼šè¯¥éƒ¨åˆ†æ˜¯è§„åˆ™è¯­æ³•çš„é‡ç‚¹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ruleå£°æ˜è¡Œã€å‚æ•°è¡Œã€æ¡ä»¶ï¼ˆwhenï¼‰ã€ç»“æœï¼ˆthenï¼‰ç­‰éƒ¨åˆ†,ä¸‹é¢ä¾æ¬¡ä»‹ç»ã€‚ å£°æ˜è¡Œï¼šrule + â€œnameâ€,ä¸€ä¸ªè§„åˆ™çš„åç§°ã€‚ å‚æ•°è¡Œï¼šå¯ä»¥é…ç½®å½“å‰è§„åˆ™çš„å‚æ•°ï¼Œå¸¸è§çš„æœ‰ï¼šno-loop, silience, agenda-group, auto-focus, activation-group, durationç­‰ï¼Œæœ¬é¡¹ç›®ç”¨åˆ°äº†no-loopï¼šæ˜¯å¦é‡å¤æ‰§è¡Œå½“å‰è§„åˆ™ï¼Œsilienceï¼šä¼˜å…ˆçº§ï¼Œactivation-groupï¼šåŒç»„åªä¼šæ‰§è¡Œä¸€æ¡åŒ¹é…çš„è§„åˆ™ã€‚ æ¡ä»¶çº¦æŸï¼š æ¡ä»¶è¯­å¥åŸºæœ¬æ ¼å¼æ˜¯ï¼šval:Object([field op value]*),ä¸€äº›ä¾‹å­ï¼š // ä¸€èˆ¬çº¦æŸ $c : Cheese( type == â€œstiltonâ€, price &lt; 10, age == â€œmatureâ€ ) // &amp;&amp; å’Œ || çº¦æŸ Cheese( type == â€œstiltonâ€ &amp;&amp; price &lt; 10, age == â€œmatureâ€ ) Cheese( type == â€œstiltonâ€ || price &lt; 10, age == â€œmatureâ€ ) // matches æ“ä½œ Cheese( type matches â€œ(Buffalo)?/S*Mozerellaâ€ ) Cheese( type not matches â€œ(Buffulo)?/S*Mozerellaâ€ ) // contains æ“ä½œ CheeseCounter( cheeses contains â€œstiltonâ€ ) CheeseCounter( cheeses not contains â€œcheddarâ€ ) // memberof æ“ä½œ CheeseCounter( cheese memberof $matureCheeses ) CheeseCounter( cheese not memberof $matureCheeses ) // å­—ç¬¦ä¸²çº¦æŸ Cheese( quantity == 5 ) Cheese( bestBefore &lt; â€œ27-Oct-2007â€ ) Cheese( type == â€œstiltonâ€ ) Cheese( smelly == true ) // ç»‘å®šå˜é‡çº¦æŸ Person( likes : favouriteCheese ) Cheese( type == likes ) // è¿”å›å€¼çº¦æŸ Person( girlAge : age, sex == â€œFâ€ ) Person( age == ( girlAge + 2) ), sex == â€˜Mâ€™ ) // å¤åˆå€¼çº¦æŸ Person( $cheese : favouriteCheese ) Cheese( type in ( â€œstiltonâ€, â€œcheddarâ€, $cheese ) // å¤šé‡çº¦æŸ Person( age ( (> 30 &amp;&amp; &lt; 40) || (> 20 &amp;&amp; &lt; 25) ) ) Person( age > 30 &amp;&amp; &lt; 40 || location == â€œlondonâ€ ) // å†…è” eval çº¦æŸ Person( girlAge : age, sex = â€œFâ€ ) Person( eval( girlAge == boyAge + 2 ), sex = â€˜Mâ€™ ) æ‰§è¡Œæ“ä½œï¼šè¿™éƒ¨åˆ†çš„ä»£ç è™½ç„¶å¯ä»¥ç›´æ¥å†™Javaç¨‹åºï¼Œä½†æ˜¯åº”è¯¥ç®€çŸ­ï¼Œä¸»è¦ç›®çš„æ˜¯æ’å…¥å’Œæ›´æ–°ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰queryç­‰å…¶ä»–è§„åˆ™æˆåˆ†ï¼Œç”±äºå¤æ‚åº¦çš„é™åˆ¶ï¼Œé¡¹ç›®ä¸­ä¸ä¼šé‡‡ç”¨è¿™äº›åŠŸèƒ½ï¼Œè¿™é‡Œä¹Ÿä¸åšä»‹ç»ã€‚ Â¶4 å°†Droolsåº”ç”¨åˆ°é¡¹ç›®ä¸­ ä»ä¸Šè¿°çš„è§„åˆ™æ–‡ä»¶è¯­æ³•ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„è¯­æ³•è§„åˆ™åŸºäºJavaï¼Œæ˜¯éå¸¸çµæ´»çš„ã€‚ä½†æ˜¯æœ¬åœºæ™¯ä¸‹éœ€è¦å°†è¿™éƒ¨åˆ†çš„åŠŸèƒ½æä¾›ç»™ä¸šåŠ¡æ–¹é…ç½®ï¼Œå› æ­¤è¿‡äºçµæ´»çš„é…ç½®æ–¹æ¡ˆä¸ç®¡æ˜¯å®ç°ï¼Œè¿˜æ˜¯äº¤ä»˜ä½¿ç”¨æˆæœ¬éƒ½å°†ä¼šéå¸¸é«˜ï¼Œå› æ­¤éœ€è¦å¯¹è§„åˆ™è¿›è¡Œä¸€å®šç¨‹åº¦çš„é™åˆ¶ã€‚ åŒ¹é…çš„è¿‡ç¨‹æ¡ä»¶æ˜¯å¤šä¸ªå¯¹è±¡ã€æ¯ä¸ªå¯¹è±¡åˆæœ‰å¤šä¸ªå­—æ®µçš„åˆ¤æ–­ï¼Œè¿™éƒ¨åˆ†çš„å¤šæ¬¡é…ç½®å°†ä¼šé€ æˆä¸šåŠ¡æ–¹ä¸€å®šå›°æ‰°ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬ç®€åŒ–ä¸ºï¼šä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬æ‰€æœ‰å­—æ®µï¼Œä¸šåŠ¡ä»…é€‰æ‹©å­—æ®µå’Œå†™å¯¹åº”æ¯ä¸ªå­—æ®µçš„ç­›é€‰æ¡ä»¶å³å¯ã€‚ importsï¼šæˆ‘ä»¬é»˜è®¤å¯¼å…¥java.util.Mapå’Œjava.util.HashMapä½œä¸ºç»“æœé›†çš„ç±»å‹ï¼Œä»¥åŠå…¥å‚çš„å¯¹è±¡çš„å¼•ç”¨ã€‚ function å’Œ queryï¼šå‡ºäºç®€åŒ–è€ƒè™‘æš‚ä¸å®ç°è¯¥éƒ¨åˆ†çš„é…ç½®ã€‚ ruleå‚æ•°é…ç½®ï¼šè¿™é‡Œä½¿ç”¨äº†éƒ¨åˆ†éœ€è¦çš„å‚æ•°ï¼š salienceï¼šä¼˜å…ˆçº§ï¼Œè¿™ä¸ªå‚æ•°æ˜¯æä¾›ç»™ç”¨æˆ·é…ç½®çš„ï¼Œç¡®è®¤æ‰§è¡Œçš„é¡ºåºã€‚ activation-groupï¼šä¸€ä¸ªè§„åˆ™é›†ä¸­çš„è§„åˆ™éƒ½åœ¨åŒä¸€ä¸ªåˆ†ç»„ä¸­ï¼Œé¿å…åŒ¹é…å®Œé«˜ä¼˜å…ˆçº§çš„è§„åˆ™åä»ç„¶è¿›å…¥ä½ä¼˜å…ˆçº§çš„è§„åˆ™å¯¼è‡´ç»“æœé›†å­—æ®µè¢«è¦†ç›–ã€‚ no-loopï¼šæœ¬æ˜¯ç”¨äºé˜²æ­¢è§„åˆ™é‡å¤åŒ¹é…ï¼Œè¿™é‡Œç»“æœæ“ä½œä¸­æ²¡æœ‰updateæ“ä½œï¼Œå› æ­¤ä¹Ÿä¸ä¼šå‡ºç°é‡å¤åŒ¹é…ï¼Œä¸ºäº†ä¿é™©è¿˜æ˜¯è®¾ç½®ä¸€ä¸‹è¯¥å‚æ•°ã€‚ rule æ¡ä»¶é…ç½®ï¼šåªæä¾›ä¸€ä¸ªæ¡ä»¶å¯¹è±¡å’Œè¿”å›ç»“æœé›†åˆï¼Œç”¨æˆ·èƒ½é…ç½®çš„éƒ¨åˆ†ä¸ºæ¡ä»¶å¯¹è±¡çš„å­—æ®µçš„æ¡ä»¶ï¼Œæ¡ä»¶é—´çš„å…³ç³»æš‚å®šé€—å·åˆ†éš”ï¼Œéƒ½ä¸ºä¸”ï¼ˆ&amp;&amp;ï¼‰ã€‚ rule ç»“æœé…ç½®ï¼šå¯ä»¥ç›´æ¥å†™ Java ç¨‹åºï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ä¸šåŠ¡æ–¹çš„ä½¿ç”¨ä½“éªŒï¼Œå› æ­¤è¿™éƒ¨åˆ†åšäº†æå¤§çš„é™åˆ¶ï¼šåªèƒ½å‘ä¼ å…¥çš„Mapä¸­å†™å…¥é”®å€¼å¯¹ã€‚è€Œä¸”é”®ä¹Ÿæ˜¯ç”±ç®¡ç†å‘˜é…ç½®çš„å­—æ®µä¸­é€‰å–ï¼Œä»è€Œä¿è¯äº†ä¸šåŠ¡æ–¹é¢çš„ä½¿ç”¨ä¸ä¼šæœ‰å¤ªé«˜çš„é—¨æ§›ã€‚ ç»¼åˆä»¥ä¸Šçš„æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨çš„è§„åˆ™æ–‡ä»¶çš„åŸºæœ¬ç»“æ„ï¼š package com.sample.drools.rule import java.util.Map import java.util.HashMap import com.sample.RuleCondition rule &quot;[ruleName]&quot; no-loop: true salience: [priority] activation-group: sample when $condition: Condition([f1] [op] [v1], [f2] [op] [v2]) $resultMap: HashMap() then $resultMap.put([key1], [value1]) $resultMap.put([key2], [value2]) ... end ä¸Šè¿°çš„ä»£ç ï¼Œåªæœ‰æ‹¬å·åŒ…å«çš„å€¼æ˜¯ç”¨æˆ·é…ç½®çš„ï¼Œè€Œä¸”å¤§éƒ¨åˆ†éƒ½ä¸ºé€‰é¡¹ï¼Œæœ€å¤§ç¨‹åº¦é™ä½äº†é…ç½®æˆæœ¬ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯å¥å£®å’Œçµæ´»æ€§ï¼Œä¹Ÿéœ€è¦å°†æ¯ä¸ªè§„åˆ™é›†çš„æ¡ä»¶å’Œç»“æœå®šä¹‰äº¤ç»™æ›´æœ‰ç»éªŒçš„å¼€å‘è€…é…ç½®ï¼Œå› æ­¤åŒæ ·éœ€è¦è®¾è®¡ä¸€ä¸ªè§„åˆ™é›†å’Œå­—æ®µç®¡ç†çš„ç®¡ç†å‘˜é…ç½®æ¨¡å—ã€‚ Â¶5 åŠŸèƒ½è®¾è®¡ åŠŸèƒ½è®¾è®¡ä¸Šå‚è€ƒä¹‹å‰é€šç”¨ç­–ç•¥éƒ¨åˆ†ï¼Œå®ç°äº†â€œç®¡ç†å‘˜ä¾§â€å’Œâ€œç”¨æˆ·ä¾§â€2éƒ¨åˆ†çš„ç®¡ç†ç³»ç»Ÿï¼Œå…·ä½“åŠŸèƒ½å¦‚ä¸‹å›¾ï¼š ç®¡ç†å‘˜ä¾§å¯ä»¥åˆ›å»ºè§„åˆ™é›†ï¼Œå¯¹åº”ç€åº”ç”¨è§„åˆ™çš„ä¸åŒåœºæ™¯ï¼ŒåŒæ—¶å¯ä»¥ä¿®æ”¹åˆ é™¤ï¼›è¿˜éœ€è¦å®ç°è§„åˆ™é›†å†…æ‰€æœ‰æ¡ä»¶å­—æ®µã€ç»“æœå­—æ®µçš„æ–°å¢è°ƒæ•´ï¼Œä»¥ä¾›ç”¨æˆ·ä¾§é€‰æ‹©ã€‚ ç”¨æˆ·ä¾§å¯ä»¥é€‰æ‹©ä¸€ä¸ªè§„åˆ™é›†ï¼Œæ·»åŠ æ–°çš„è§„åˆ™ï¼Œæ·»åŠ çš„æ—¶å€™è¦åŒæ—¶åœ¨æ‰€æœ‰å­—æ®µä¸­é€‰æ‹©æ‰€éœ€è¦çš„æ¡ä»¶å­—æ®µã€ç»“æœå­—æ®µï¼Œå¹¶è®¾ç½®å¥½ä»–ä»¬çš„æ“ä½œç¬¦å’Œå€¼ï¼Œç¡®è®¤å½“å‰è§„åˆ™çš„æ‰§è¡Œæµç¨‹ã€‚ç”¨æˆ·åŒæ ·å¯ä»¥ä¿®æ”¹ã€åˆ é™¤è§„åˆ™ã€‚ ç®¡ç†å‘˜åœ¨ç¼–è¾‘è§„åˆ™é›†å’Œè§„åˆ™é›†å­—æ®µçš„æ—¶å€™æœ‰ä½¿ç”¨çŠ¶æ€çº¦æŸï¼Œåœ¨ä½¿ç”¨ä¸­çš„è§„åˆ™é›†å’Œå­—æ®µæ˜¯æ— æ³•åˆ é™¤çš„ï¼›ç”¨æˆ·åœ¨ç¼–è¾‘è§„åˆ™å’Œå­—æ®µçš„æ—¶å€™æœ‰è§„åˆ™å¼•æ“æ ¡éªŒçº¦æŸï¼Œå¦‚æœå¡«å†™çš„è§„åˆ™å¯¼è‡´æ ¡éªŒå¤±è´¥ï¼ŒåŒæ ·æ˜¯æ— æ³•é…ç½®çš„ã€‚ Â¶6 åº“è¡¨ç»“æ„è®¾è®¡ åŸæœ¬è®¡åˆ’ç”¨ä¸€å¥—æ–°åº“è¡¨ç»“æ„å®ç°è¯¥éƒ¨åˆ†çš„æ•°æ®å­˜å‚¨ï¼Œä¸ºäº†éªŒè¯é€šç”¨ç­–ç•¥çš„æ‹“å±•æ€§ï¼Œå› æ­¤å°†é€šç”¨è§„åˆ™éƒ¨åˆ†çš„æ•°æ®é€‚é…åˆ°é€šç”¨ç­–ç•¥çš„åº“è¡¨ç»“æ„ä¸­ã€‚ ä¸è¿‡æ¯”è¾ƒå¥½çš„æ˜¯ï¼Œè¯¥åº“è¡¨ç»“æ„åªéœ€è¦è¿›è¡Œå°‘é‡çš„æ‹“å±•å³å¯å®ç°å¯¹è§„åˆ™éƒ¨åˆ†çš„æ”¯æŒã€‚ ç­–ç•¥é›†å­—æ®µå¢åŠ è§’è‰²ä¿¡æ¯å­—æ®µï¼ˆroleï¼‰ï¼Œæ˜¯å¦å¿…å¡«ï¼ˆisRequiredï¼‰ã€‚ ç­–ç•¥é›†è¡¨å¢åŠ typeå±æ€§åˆ¤æ–­æ˜¯è§„åˆ™è¿˜æ˜¯ç­–ç•¥ã€‚ è§„åˆ™æ–‡ä»¶å’Œåº“è¡¨ç»“æ„å¯¹åº”å…³ç³»å¦‚ä¸‹è¡¨ï¼š |è§„åˆ™æ–‡ä»¶å­—æ®µ|åº“è¡¨ç»“æ„ä½ç½®| |â€“|â€“| ||| Â¶7 å®ç°æ•ˆæœå±•ç¤º Â¶8 åç»­å¼€å‘è®¡åˆ’ Â¶8.1 å¸¦æœ‰é€»è¾‘çš„è§„åˆ™è¯­å¥çš„æ”¯æŒ"},{"title":"é€šç”¨ç­–ç•¥æ–‡æ¡£","path":"2019/11/26/é€šç”¨ç­–ç•¥æ–‡æ¡£/","text":"Â¶é¡¹ç›®èƒŒæ™¯ åœºæ™¯æ˜¯æ ¹æ®ä¸€äº›æ¡ä»¶å»æŸ¥è¯¢æŒ‡å®šçš„ç»“æœï¼Œåœºæ™¯è¾ƒå¤šï¼Œå¦‚æœæ¯ä¸ªåœºæ™¯éƒ½ç»´æŠ¤ä¸€å¥—å¯¹åº”çš„åº“è¡¨å’Œæ•°æ®ç»“æ„ï¼Œæˆæœ¬è¿‡é«˜è€Œä¸”ä¸é€šç”¨ï¼Œè¿™é‡Œç”¨é€šç”¨ç­–ç•¥å»é…ç½®ï¼Œå®ç°çš„æ•ˆæœæ˜¯ä¼ å…¥æŒ‡å®šçš„ç­–ç•¥codeå’Œæ¡ä»¶æ•°æ®å¯ä»¥å¾—åˆ°å¯¹åº”çš„æŸ¥è¯¢ç»“æœã€‚ åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸€äº›æ¡ä»¶å»æŸ¥è¯¢ç»“æœï¼Œ Â¶é¡¹ç›®åœ°å€ å‰ç«¯åœ°å€ ç®¡ç†åœ°å€ æµ‹è¯•ç¯å¢ƒ http://wl.be.test.mi.com/oms http://wl.be.test.mi.com/oms/#/admin/common-strategy çº¿ä¸Šç¯å¢ƒ http://wl.be.mi.com/oms http://wl.be.mi.com/oms/#/admin/common-strategy å¦‚é‡æ— æ³•ç™»é™†è¯·åœ¨å·¥ä½œå°(æµ‹è¯•/çº¿ä¸Š)æ·»åŠ ç³»ç»Ÿæƒé™ã€‚ Â¶ä½¿ç”¨æŒ‡å— Â¶1. åˆ›å»ºç­–ç•¥é›† Â¶2. å®šä¹‰ç­–ç•¥é›†å­—æ®µ Â¶3. åˆ›å»ºç­–ç•¥ Â¶4. é€‰æ‹©ç­–ç•¥å­—æ®µ Â¶5. ä¸‹è½½ç­–ç•¥å’ŒåŸºç¡€æ•°æ® Â¶6. å¡«å†™å¥½ç­–ç•¥æ•°æ®ï¼Œå¹¶å¯¼å…¥ Â¶7. å®šä¹‰è¯¥ç­–ç•¥çš„åŒ¹é…è§„åˆ™ Â¶8. é€šè¿‡ç³»ç»Ÿç¬¬ä¸‰æ–¹X5æ¥å£æŸ¥è¯¢ç­–ç•¥æ•°æ®"}]