<!DOCTYPE html>

<html lang="cn">

<head>
    
    <title>学以致用 - XHX Blog</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="blog,programmer">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="¶刷题经历   最近一直在刷 Leetcode，刚好遇到一个 SQL 的题涉及到没有学习过的知识点。该题描述如下：  给定一个数据表 Department，数据格式如下：     id revenue month     1 8000 Jan   2 9000 Jan   3 10000 Feb   1 7000 Feb   1 6000 Mar     要求返回的格式是上述数据的按 id 和 m">
<meta property="og:type" content="article">
<meta property="og:title" content="学以致用">
<meta property="og:url" content="http://xiaohaoxing.xyz/2020/04/30/%E5%AD%A6%E4%BB%A5%E8%87%B4%E7%94%A8/index.html">
<meta property="og:site_name" content="XHX Blog">
<meta property="og:description" content="¶刷题经历   最近一直在刷 Leetcode，刚好遇到一个 SQL 的题涉及到没有学习过的知识点。该题描述如下：  给定一个数据表 Department，数据格式如下：     id revenue month     1 8000 Jan   2 9000 Jan   3 10000 Feb   1 7000 Feb   1 6000 Mar     要求返回的格式是上述数据的按 id 和 m">
<meta property="og:locale">
<meta property="og:image" content="http://xiaohaoxing.xyz/images/%E6%99%BA%E8%83%BD%E8%B0%83%E6%8B%A8%E6%95%88%E6%9E%9C%E5%9B%BE.png">
<meta property="og:image" content="http://xiaohaoxing.xyz/images/%E6%99%BA%E8%83%BD%E8%B0%83%E6%8B%A8%E5%8A%A8%E6%80%81SQL.png">
<meta property="og:image" content="http://xiaohaoxing.xyz/images/json.png">
<meta property="og:image" content="http://xiaohaoxing.xyz/images/%E7%95%8C%E9%9D%A2.png">
<meta property="article:published_time" content="2020-04-30T06:22:43.000Z">
<meta property="article:modified_time" content="2021-08-08T18:35:04.402Z">
<meta property="article:author" content="Xiao Haoxing">
<meta property="article:tag" content="leetcode">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xiaohaoxing.xyz/images/%E6%99%BA%E8%83%BD%E8%B0%83%E6%8B%A8%E6%95%88%E6%9E%9C%E5%9B%BE.png">
    
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/justifiedGallery/justifiedGallery.min.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1694670087724">
    
    <link rel="stylesheet" href="/css/style.css?v=1694670087724">

    
        
            <link rel="stylesheet" href="/custom.css?v=1694670087724">
        
    
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="mdui-drawer-body-left">
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="Xiao Haoxing" class="mdui-btn mdui-btn-icon"><img src="/../../images/header.jpg" alt="Xiao Haoxing"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Xiao Haoxing">
            <img src="/../../images/header.jpg" alt="Xiao Haoxing" alt="Xiao Haoxing">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>Articles</span>12</div>
        <div><span>Tags</span>13</div>
        <div><span>Categories</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
        
        
        
        
        
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/drools/" style="font-size: 10px;">drools</a> <a href="/tags/frp/" style="font-size: 10px;">frp</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/leetcode/" style="font-size: 10px;">leetcode</a> <a href="/tags/mi/" style="font-size: 10px;">mi</a> <a href="/tags/productivity/" style="font-size: 10px;">productivity</a> <a href="/tags/spring-boot/" style="font-size: 10px;">spring-boot</a> <a href="/tags/spring-security/" style="font-size: 10px;">spring-security</a> <a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 10px;">技术</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/" style="font-size: 10px;">技术方案</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 20px;">教程</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(17);
        var tags_length = parseInt(13);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2023 Xiao Haoxing
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
    
        <div class="nexmoe-post-cover mdui-ripple text"> 
            <img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" alt="学以致用" loading="lazy">
            <h1>学以致用</h1>
        </div>
    
    
    <div class="nexmoe-post-meta nexmoe-rainbow">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020年04月30日</a>
    
    
    <a><i class="nexmoefont icon-areachart"></i>约1.5k字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>预计需要6分钟</a>

</div>

    <h2 id="刷题经历"><a class="header-anchor" href="#刷题经历">¶</a>刷题经历</h2>
<p>  最近一直在刷 Leetcode，刚好遇到一个 <a target="_blank" rel="noopener" href="https://leetcode.com/problems/reformat-department-table/">SQL 的题</a>涉及到没有学习过的知识点。该题描述如下：</p>
<blockquote>
<p>给定一个数据表 <code>Department</code>，数据格式如下：</p>
</blockquote>
<table>
<thead>
<tr>
<th>id</th>
<th>revenue</th>
<th>month</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>8000</td>
<td>Jan</td>
</tr>
<tr>
<td>2</td>
<td>9000</td>
<td>Jan</td>
</tr>
<tr>
<td>3</td>
<td>10000</td>
<td>Feb</td>
</tr>
<tr>
<td>1</td>
<td>7000</td>
<td>Feb</td>
</tr>
<tr>
<td>1</td>
<td>6000</td>
<td>Mar</td>
</tr>
</tbody>
</table>
<blockquote>
<p>要求返回的格式是上述数据的按 <code>id</code> 和 <code>month</code> 进行聚合，但是列同时还是按月进行切分的。也就是说，行方向是根据 id 区分的，列方向是根据 month 区分的，如下表：</p>
</blockquote>
<span id="more"></span>
<table>
<thead>
<tr>
<th>id</th>
<th>Jan_Revenue</th>
<th>Feb_Revenue</th>
<th>Mar_Revenue</th>
<th>…</th>
<th>Dec_Revenue</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>8000</td>
<td>7000</td>
<td>6000</td>
<td>…</td>
<td>null</td>
</tr>
<tr>
<td>2</td>
<td>9000</td>
<td>null</td>
<td>null</td>
<td>…</td>
<td>null</td>
</tr>
<tr>
<td>3</td>
<td>null</td>
<td>10000</td>
<td>null</td>
<td>…</td>
<td>null</td>
</tr>
</tbody>
</table>
<p>  这种一看就知道用常规语法就无法做到，所以当时直接去查了答案，答案也很简单：</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> 
    id<span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Jan'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Jan_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Feb'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Feb_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Mar'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Mar_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Apr'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Apr_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'May'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'May_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Jun'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Jun_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Jul'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Jul_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Aug'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Aug_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Sep'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Sep_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Oct'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Oct_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Nov'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Nov_Revenue'</span><span class="token punctuation">,</span>
    <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'Dec'</span> <span class="token keyword">then</span> revenue <span class="token keyword">else</span> <span class="token boolean">null</span> <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'Dec_Revenue'</span>
<span class="token keyword">from</span> Department
<span class="token keyword">group</span> <span class="token keyword">by</span> id
<span class="token keyword">order</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span></code></pre>
<p>  其中重点部分就是 <code>SUM(CASE WHEN XX THEN XX else XX END)</code>，其中的 <code>WHEN</code> 和 <code>THEN</code> 既可以是字段也可以是函数也可以是简单的值，很简单，语法就能看懂在做什么，不多解释了。</p>
<h2 id="做完思考"><a class="header-anchor" href="#做完思考">¶</a>做完思考</h2>
<p>  由于题目的解法是网上直接搜的答案，当时就在想，SQL 题目的考察点都是偏向没见过的语法，都只能直接查结果，得不到练习思维的效果了，一度想要把 SQL 题过滤掉。最后还是决定留下，每次遇到 SQL 题就直接搜结果学习下，并且多做一道程序题来弥补。把 SQL 的题当做学习。</p>
<h2 id="🤟-👉-🎁-🍫"><a class="header-anchor" href="#🤟-👉-🎁-🍫">¶</a>🤟 👉 🎁 🍫</h2>
<p>  正如《阿甘正传》里说的那样：”Life is like a box of chocolate, you never konw what you’ll gonna get“。我也没想到这种不常用的 SQL 还会有排上用场的时候。<br>
  场景是这样的：现在提供一个接口，实现的是自动生成调拨方案，存在表中的结构是由方案ID、商品ID、发货仓库、收货仓库四个字段唯一确定的一条记录，字段还包括当前商品的名称、当前商品的调拨数量等信息。如下表：</p>
<table>
<thead>
<tr>
<th>id</th>
<th>plan_id</th>
<th>goods_id</th>
<th>goods_name</th>
<th>from</th>
<th>to</th>
<th>number</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>31029</td>
<td>A123</td>
<td>小米10 Pro</td>
<td>31024</td>
<td>31028</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>  上述的一条记录表示的是：创建的自动调拨方案 31029 中有一条调拨记录，需要将 20 只小米 10 Pro手机(ID: A123)从 31024 仓库调拨到 31028 仓库。<br>
  现在需要提供一个界面，供用户查询一个调拨方案的详表，其中每一行代表了一种商品，一列数据代表了一个[发货仓]-[收货仓]的对应关系，如果该商品在这个调拨关系上没有数据则留空。最终效果如下图（来自于系统原型图）：<br>
<img onerror="imgOnError(this);" data-fancybox="gallery" src="/images/%E6%99%BA%E8%83%BD%E8%B0%83%E6%8B%A8%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt="智能调拨效果" data-caption="智能调拨效果" loading="lazy"></p>
<p>  一开始考虑的技术方案是，将表中对应的所有数据项都查询出来，然后通过程序去做数据的聚合，整理出来的思路如下：</p>
<pre><code>显示调拨方案详情：
- 查询得到List&lt;Item&gt;     items
- 所有的 MihomeFrom-MihomeTo pair 做成 HashSet
- 生成 Headers
- Sku 过滤成 HashSet sku
- foreach sku in skus
- - foreach item in items.filter(sku)
- - data.add(item.mihomeFrom-item.mihomeTo, item.number)
导出报表：使用显示详情的接口，并将 header+data 的结果转换成 csv
- header转换成 ArrayList
- data 也转换成同大小的 ArrayList，并 search 到对应的值
</code></pre>
<p>  后来回忆起做过的做过的 LeetCode 题目，可以看出，上表中的每一行记录对应了原型图中的表格的每一个格点，这个业务场景就完美契合了上面题目的考察点：对原始表中的数据进行特定情况的聚合，生成新的数据列。不同的地方在于，例题中的数据列是给定的12个月，而当前的业务需要根据数据的特点动态生成。这一难点在Mybatis中也比较好解决：Mapper.xml 作为DAL层访问数据库的代理，既可以传入参数，也支持一些简单的逻辑操作指令，比如for循环插入<code>SUM</code>函数就可以实现生成动态列的效果。</p>
<h2 id="解决方案"><a class="header-anchor" href="#解决方案">¶</a>解决方案</h2>
<h3 id="1-查询出所需的所有动态列数据"><a class="header-anchor" href="#1-查询出所需的所有动态列数据">¶</a>1. 查询出所需的所有动态列数据</h3>
<p>SQL：</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> mihome_from<span class="token punctuation">,</span> mihome_to <span class="token keyword">from</span> plan_test <span class="token keyword">as</span> l <span class="token keyword">where</span> l<span class="token punctuation">.</span>plan_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre>
<p>结果集：</p>
<table>
<thead>
<tr>
<th>mihome_from</th>
<th>mihome_to</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>12</td>
</tr>
<tr>
<td>2</td>
<td>10</td>
</tr>
<tr>
<td>3</td>
<td>14</td>
</tr>
</tbody>
</table>
<p>  将上述结果用一个数据结构 List&lt;MihomePair&gt; 保存起来，在下一步中使用。</p>
<h3 id="2-动态构建-SQL"><a class="header-anchor" href="#2-动态构建-SQL">¶</a>2. 动态构建 SQL</h3>
<p>mapper.xml:</p>
<pre class="language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectDetailTable<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>java.util.HashMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
select sku, goods_id,goods_name, 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mihomePair<span class="token punctuation">"</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pair<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  SUM(CASE WHEN mihome_from=#&#123;pair.from&#125; and mihome_to = #&#123;pair_to&#125; then number else null end) as '#&#123;pair.from&#125;-#&#123;pair_to&#125;'
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">></span></span>
from plan_test where plan_id = 1 group by sku,goods_id, goods_name
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre>
<p>SQL 执行结果：<br>
<img onerror="imgOnError(this);" data-fancybox="gallery" src="/images/%E6%99%BA%E8%83%BD%E8%B0%83%E6%8B%A8%E5%8A%A8%E6%80%81SQL.png" alt="智能调拨动态SQL" data-caption="智能调拨动态SQL" loading="lazy"></p>
<h3 id="输出结果"><a class="header-anchor" href="#输出结果">¶</a>输出结果</h3>
<p>  结果集<code>HashMap</code>中的<code>KeySet</code>自身可以作为表头，稍转换下即可返回，数据项都符合前端需要的格式，也可以直接返回。</p>
<p>  该结果可以进一步转换成 SKU 作为键的 List，供用户的更新操作方便操作原始数据。也可以将 KeySet 转换为 List，数据列从 Map 转换成数组，方便导出 CSV 格式的文件。</p>
<h2 id="项目实践"><a class="header-anchor" href="#项目实践">¶</a>项目实践</h2>
<p>  在智能调拨项目中将这个技术点应用到实践中，最终实现的效果如下：</p>
<p>** 请求响应 json **<br>
<img onerror="imgOnError(this);" data-fancybox="gallery" src="/images/json.png" alt="响应" data-caption="响应" loading="lazy"></p>
<p>** 用户界面 **</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="/images/%E7%95%8C%E9%9D%A2.png" alt="界面" data-caption="界面" loading="lazy"></p>
<h2 id="思考"><a class="header-anchor" href="#思考">¶</a>思考</h2>
<p>  这个问题看似简单，但是可以反映出一些有意思的观点：”世界上没有错误的道路，他们最终都走向正确“。不要放弃平时的积累，也许他们会在意想不到的时候给你一个bonus~</p>

    
  </article>

  
      

  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/leetcode/" rel="tag">leetcode</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E9%A2%98%E7%BB%8F%E5%8E%86"><span class="toc-number">1.</span> <span class="toc-text">刷题经历</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%81%9A%E5%AE%8C%E6%80%9D%E8%80%83"><span class="toc-number">2.</span> <span class="toc-text">做完思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%9F-%F0%9F%91%89-%F0%9F%8E%81-%F0%9F%8D%AB"><span class="toc-number">3.</span> <span class="toc-text">🤟 👉 🎁 🍫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">4.</span> <span class="toc-text">解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%89%80%E9%9C%80%E7%9A%84%E6%89%80%E6%9C%89%E5%8A%A8%E6%80%81%E5%88%97%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.</span> <span class="toc-text">1. 查询出所需的所有动态列数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8A%A8%E6%80%81%E6%9E%84%E5%BB%BA-SQL"><span class="toc-number">4.2.</span> <span class="toc-text">2. 动态构建 SQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">4.3.</span> <span class="toc-text">输出结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5"><span class="toc-number">5.</span> <span class="toc-text">项目实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%80%83"><span class="toc-number">6.</span> <span class="toc-text">思考</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
    <div id="nexmoe-search-space">
	<div class="search-container">
		<div class="search-header">
			<div class="search-input-container">
				<input
					class="search-input"
					type="text"
					placeholder="Search"
					oninput="sinput();"
				/>
			</div>
			<a class="search-close" onclick="sclose();">×</a>
		</div>
		<div class="search-body"></div>
	</div>
</div>

    
<script src="/lib/mdui_043tiny/mdui.js"></script>
<script src="/lib/jquery.min.js"></script>
<script src="/lib/justifiedGallery/jquery.justifiedGallery.min.js"></script>
<script src="/lib/fancybox/fancybox.umd.js"></script>


 

<script async src="/js/app.js?v=1694670087738"></script>



<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>

</body>

</html>
